/*! obs-upload version 1.0.0 */
import t from"esdk-obs-browserjs";export{default as ObsClient}from"esdk-obs-browserjs";import{cloneDeep as e,isFunction as r}from"lodash-es";import{nanoid as n}from"nanoid";import o,{AbortError as i}from"p-retry";import c from"p-all";var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f=function(t){return t&&t.Math==Math&&t},s=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof u&&u)||function(){return this}()||Function("return this")(),l={},p=function(t){try{return!!t()}catch(t){return!0}},d=!p((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),v=!p((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),h=v,y=Function.prototype.call,m=h?y.bind(y):function(){return y.apply(y,arguments)},g={},b={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,_=S&&!b.call({1:2},1);g.f=_?function(t){var e=S(this,t);return!!e&&e.enumerable}:b;var w,O,x=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},E=v,j=Function.prototype,k=j.bind,P=j.call,T=E&&k.bind(P,P),I=E?function(t){return t&&T(t)}:function(t){return t&&function(){return P.apply(t,arguments)}},C=I,N=C({}.toString),R=C("".slice),A=function(t){return R(N(t),8,-1)},D=p,M=A,L=Object,U=I("".split),F=D((function(){return!L("z").propertyIsEnumerable(0)}))?function(t){return"String"==M(t)?U(t,""):L(t)}:L,V=TypeError,z=function(t){if(null==t)throw V("Can't call method on "+t);return t},B=F,K=z,G=function(t){return B(K(t))},W=function(t){return"function"==typeof t},J=W,H=function(t){return"object"==typeof t?null!==t:J(t)},$=s,X=W,Y=function(t){return X(t)?t:void 0},q=function(t,e){return arguments.length<2?Y($[t]):$[t]&&$[t][e]},Q=I({}.isPrototypeOf),Z=q("navigator","userAgent")||"",tt=s,et=Z,rt=tt.process,nt=tt.Deno,ot=rt&&rt.versions||nt&&nt.version,it=ot&&ot.v8;it&&(O=(w=it.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!O&&et&&(!(w=et.match(/Edge\/(\d+)/))||w[1]>=74)&&(w=et.match(/Chrome\/(\d+)/))&&(O=+w[1]);var ct=O,ut=ct,at=p,ft=!!Object.getOwnPropertySymbols&&!at((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ut&&ut<41})),st=ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,lt=q,pt=W,dt=Q,vt=Object,ht=st?function(t){return"symbol"==typeof t}:function(t){var e=lt("Symbol");return pt(e)&&dt(e.prototype,vt(t))},yt=String,mt=function(t){try{return yt(t)}catch(t){return"Object"}},gt=W,bt=mt,St=TypeError,_t=function(t){if(gt(t))return t;throw St(bt(t)+" is not a function")},wt=_t,Ot=function(t,e){var r=t[e];return null==r?void 0:wt(r)},xt=m,Et=W,jt=H,kt=TypeError,Pt={exports:{}},Tt=s,It=Object.defineProperty,Ct=function(t,e){try{It(Tt,t,{value:e,configurable:!0,writable:!0})}catch(r){Tt[t]=e}return e},Nt=Ct,Rt=s["__core-js_shared__"]||Nt("__core-js_shared__",{}),At=Rt;(Pt.exports=function(t,e){return At[t]||(At[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.8",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.8/LICENSE",source:"https://github.com/zloirock/core-js"});var Dt=z,Mt=Object,Lt=function(t){return Mt(Dt(t))},Ut=Lt,Ft=I({}.hasOwnProperty),Vt=Object.hasOwn||function(t,e){return Ft(Ut(t),e)},zt=I,Bt=0,Kt=Math.random(),Gt=zt(1..toString),Wt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Gt(++Bt+Kt,36)},Jt=s,Ht=Pt.exports,$t=Vt,Xt=Wt,Yt=ft,qt=st,Qt=Ht("wks"),Zt=Jt.Symbol,te=Zt&&Zt.for,ee=qt?Zt:Zt&&Zt.withoutSetter||Xt,re=function(t){if(!$t(Qt,t)||!Yt&&"string"!=typeof Qt[t]){var e="Symbol."+t;Yt&&$t(Zt,t)?Qt[t]=Zt[t]:Qt[t]=qt&&te?te(e):ee(e)}return Qt[t]},ne=m,oe=H,ie=ht,ce=Ot,ue=function(t,e){var r,n;if("string"===e&&Et(r=t.toString)&&!jt(n=xt(r,t)))return n;if(Et(r=t.valueOf)&&!jt(n=xt(r,t)))return n;if("string"!==e&&Et(r=t.toString)&&!jt(n=xt(r,t)))return n;throw kt("Can't convert object to primitive value")},ae=TypeError,fe=re("toPrimitive"),se=function(t,e){if(!oe(t)||ie(t))return t;var r,n=ce(t,fe);if(n){if(void 0===e&&(e="default"),r=ne(n,t,e),!oe(r)||ie(r))return r;throw ae("Can't convert object to primitive value")}return void 0===e&&(e="number"),ue(t,e)},le=se,pe=ht,de=function(t){var e=le(t,"string");return pe(e)?e:e+""},ve=H,he=s.document,ye=ve(he)&&ve(he.createElement),me=function(t){return ye?he.createElement(t):{}},ge=me,be=!d&&!p((function(){return 7!=Object.defineProperty(ge("div"),"a",{get:function(){return 7}}).a})),Se=d,_e=m,we=g,Oe=x,xe=G,Ee=de,je=Vt,ke=be,Pe=Object.getOwnPropertyDescriptor;l.f=Se?Pe:function(t,e){if(t=xe(t),e=Ee(e),ke)try{return Pe(t,e)}catch(t){}if(je(t,e))return Oe(!_e(we.f,t,e),t[e])};var Te={},Ie=d&&p((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ce=H,Ne=String,Re=TypeError,Ae=function(t){if(Ce(t))return t;throw Re(Ne(t)+" is not an object")},De=d,Me=be,Le=Ie,Ue=Ae,Fe=de,Ve=TypeError,ze=Object.defineProperty,Be=Object.getOwnPropertyDescriptor;Te.f=De?Le?function(t,e,r){if(Ue(t),e=Fe(e),Ue(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Be(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return ze(t,e,r)}:ze:function(t,e,r){if(Ue(t),e=Fe(e),Ue(r),Me)try{return ze(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Ve("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Ke=Te,Ge=x,We=d?function(t,e,r){return Ke.f(t,e,Ge(1,r))}:function(t,e,r){return t[e]=r,t},Je={exports:{}},He=d,$e=Vt,Xe=Function.prototype,Ye=He&&Object.getOwnPropertyDescriptor,qe=$e(Xe,"name"),Qe={EXISTS:qe,PROPER:qe&&"something"===function(){}.name,CONFIGURABLE:qe&&(!He||He&&Ye(Xe,"name").configurable)},Ze=W,tr=Rt,er=I(Function.toString);Ze(tr.inspectSource)||(tr.inspectSource=function(t){return er(t)});var rr,nr,or,ir=tr.inspectSource,cr=W,ur=ir,ar=s.WeakMap,fr=cr(ar)&&/native code/.test(ur(ar)),sr=Pt.exports,lr=Wt,pr=sr("keys"),dr=function(t){return pr[t]||(pr[t]=lr(t))},vr={},hr=fr,yr=s,mr=I,gr=H,br=We,Sr=Vt,_r=Rt,wr=dr,Or=vr,xr=yr.TypeError,Er=yr.WeakMap;if(hr||_r.state){var jr=_r.state||(_r.state=new Er),kr=mr(jr.get),Pr=mr(jr.has),Tr=mr(jr.set);rr=function(t,e){if(Pr(jr,t))throw new xr("Object already initialized");return e.facade=t,Tr(jr,t,e),e},nr=function(t){return kr(jr,t)||{}},or=function(t){return Pr(jr,t)}}else{var Ir=wr("state");Or[Ir]=!0,rr=function(t,e){if(Sr(t,Ir))throw new xr("Object already initialized");return e.facade=t,br(t,Ir,e),e},nr=function(t){return Sr(t,Ir)?t[Ir]:{}},or=function(t){return Sr(t,Ir)}}var Cr={set:rr,get:nr,has:or,enforce:function(t){return or(t)?nr(t):rr(t,{})},getterFor:function(t){return function(e){var r;if(!gr(e)||(r=nr(e)).type!==t)throw xr("Incompatible receiver, "+t+" required");return r}}},Nr=p,Rr=W,Ar=Vt,Dr=d,Mr=Qe.CONFIGURABLE,Lr=ir,Ur=Cr.enforce,Fr=Cr.get,Vr=Object.defineProperty,zr=Dr&&!Nr((function(){return 8!==Vr((function(){}),"length",{value:8}).length})),Br=String(String).split("String"),Kr=Je.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!Ar(t,"name")||Mr&&t.name!==e)&&Vr(t,"name",{value:e,configurable:!0}),zr&&r&&Ar(r,"arity")&&t.length!==r.arity&&Vr(t,"length",{value:r.arity});try{r&&Ar(r,"constructor")&&r.constructor?Dr&&Vr(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=Ur(t);return Ar(n,"source")||(n.source=Br.join("string"==typeof e?e:"")),t};Function.prototype.toString=Kr((function(){return Rr(this)&&Fr(this).source||Lr(this)}),"toString");var Gr=W,Wr=We,Jr=Je.exports,Hr=Ct,$r=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;return Gr(r)&&Jr(r,i,n),n.global?o?t[e]=r:Hr(e,r):(n.unsafe?t[e]&&(o=!0):delete t[e],o?t[e]=r:Wr(t,e,r)),t},Xr={},Yr=Math.ceil,qr=Math.floor,Qr=Math.trunc||function(t){var e=+t;return(e>0?qr:Yr)(e)},Zr=function(t){var e=+t;return e!=e||0===e?0:Qr(e)},tn=Zr,en=Math.max,rn=Math.min,nn=function(t,e){var r=tn(t);return r<0?en(r+e,0):rn(r,e)},on=Zr,cn=Math.min,un=function(t){return t>0?cn(on(t),9007199254740991):0},an=un,fn=function(t){return an(t.length)},sn=G,ln=nn,pn=fn,dn=function(t){return function(e,r,n){var o,i=sn(e),c=pn(i),u=ln(n,c);if(t&&r!=r){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},vn={includes:dn(!0),indexOf:dn(!1)},hn=Vt,yn=G,mn=vn.indexOf,gn=vr,bn=I([].push),Sn=function(t,e){var r,n=yn(t),o=0,i=[];for(r in n)!hn(gn,r)&&hn(n,r)&&bn(i,r);for(;e.length>o;)hn(n,r=e[o++])&&(~mn(i,r)||bn(i,r));return i},_n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wn=Sn,On=_n.concat("length","prototype");Xr.f=Object.getOwnPropertyNames||function(t){return wn(t,On)};var xn={};xn.f=Object.getOwnPropertySymbols;var En=q,jn=Xr,kn=xn,Pn=Ae,Tn=I([].concat),In=En("Reflect","ownKeys")||function(t){var e=jn.f(Pn(t)),r=kn.f;return r?Tn(e,r(t)):e},Cn=Vt,Nn=In,Rn=l,An=Te,Dn=p,Mn=W,Ln=/#|\.prototype\./,Un=function(t,e){var r=Vn[Fn(t)];return r==Bn||r!=zn&&(Mn(e)?Dn(e):!!e)},Fn=Un.normalize=function(t){return String(t).replace(Ln,".").toLowerCase()},Vn=Un.data={},zn=Un.NATIVE="N",Bn=Un.POLYFILL="P",Kn=Un,Gn=s,Wn=l.f,Jn=We,Hn=$r,$n=Ct,Xn=function(t,e,r){for(var n=Nn(e),o=An.f,i=Rn.f,c=0;c<n.length;c++){var u=n[c];Cn(t,u)||r&&Cn(r,u)||o(t,u,i(e,u))}},Yn=Kn,qn=function(t,e){var r,n,o,i,c,u=t.target,a=t.global,f=t.stat;if(r=a?Gn:f?Gn[u]||$n(u,{}):(Gn[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(c=Wn(r,n))&&c.value:r[n],!Yn(a?n:u+(f?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Xn(i,o)}(t.sham||o&&o.sham)&&Jn(i,"sham",!0),Hn(r,n,i,t)}},Qn=Sn,Zn=_n,to=Object.keys||function(t){return Qn(t,Zn)},eo=Lt,ro=to;qn({target:"Object",stat:!0,forced:p((function(){ro(1)}))},{keys:function(t){return ro(eo(t))}});var no={};no[re("toStringTag")]="z";var oo="[object z]"===String(no),io=oo,co=W,uo=A,ao=re("toStringTag"),fo=Object,so="Arguments"==uo(function(){return arguments}()),lo=io?uo:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=fo(t),ao))?r:so?uo(e):"Object"==(n=uo(e))&&co(e.callee)?"Arguments":n},po=lo,vo=String,ho=function(t){if("Symbol"===po(t))throw TypeError("Cannot convert a Symbol value to a string");return vo(t)},yo={},mo=d,go=Ie,bo=Te,So=Ae,_o=G,wo=to;yo.f=mo&&!go?Object.defineProperties:function(t,e){So(t);for(var r,n=_o(e),o=wo(e),i=o.length,c=0;i>c;)bo.f(t,r=o[c++],n[r]);return t};var Oo,xo=q("document","documentElement"),Eo=Ae,jo=yo,ko=_n,Po=vr,To=xo,Io=me,Co=dr("IE_PROTO"),No=function(){},Ro=function(t){return"<script>"+t+"<\/script>"},Ao=function(t){t.write(Ro("")),t.close();var e=t.parentWindow.Object;return t=null,e},Do=function(){try{Oo=new ActiveXObject("htmlfile")}catch(t){}var t,e;Do="undefined"!=typeof document?document.domain&&Oo?Ao(Oo):((e=Io("iframe")).style.display="none",To.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ro("document.F=Object")),t.close(),t.F):Ao(Oo);for(var r=ko.length;r--;)delete Do.prototype[ko[r]];return Do()};Po[Co]=!0;var Mo=Object.create||function(t,e){var r;return null!==t?(No.prototype=Eo(t),r=new No,No.prototype=null,r[Co]=t):r=Do(),void 0===e?r:jo.f(r,e)},Lo={},Uo=de,Fo=Te,Vo=x,zo=function(t,e,r){var n=Uo(e);n in t?Fo.f(t,n,Vo(0,r)):t[n]=r},Bo=nn,Ko=fn,Go=zo,Wo=Array,Jo=Math.max,Ho=function(t,e,r){for(var n=Ko(t),o=Bo(e,n),i=Bo(void 0===r?n:r,n),c=Wo(Jo(i-o,0)),u=0;o<i;o++,u++)Go(c,u,t[o]);return c.length=u,c},$o=A,Xo=G,Yo=Xr.f,qo=Ho,Qo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Lo.f=function(t){return Qo&&"Window"==$o(t)?function(t){try{return Yo(t)}catch(t){return qo(Qo)}}(t):Yo(Xo(t))};var Zo={},ti=re;Zo.f=ti;var ei=s,ri=Vt,ni=Zo,oi=Te.f,ii=m,ci=q,ui=re,ai=$r,fi=Te.f,si=Vt,li=re("toStringTag"),pi=function(t,e,r){t&&!r&&(t=t.prototype),t&&!si(t,li)&&fi(t,li,{configurable:!0,value:e})},di=_t,vi=v,hi=I(I.bind),yi=function(t,e){return di(t),void 0===e?t:vi?hi(t,e):function(){return t.apply(e,arguments)}},mi=A,gi=Array.isArray||function(t){return"Array"==mi(t)},bi=I,Si=p,_i=W,wi=lo,Oi=ir,xi=function(){},Ei=[],ji=q("Reflect","construct"),ki=/^\s*(?:class|function)\b/,Pi=bi(ki.exec),Ti=!ki.exec(xi),Ii=function(t){if(!_i(t))return!1;try{return ji(xi,Ei,t),!0}catch(t){return!1}},Ci=function(t){if(!_i(t))return!1;switch(wi(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ti||!!Pi(ki,Oi(t))}catch(t){return!0}};Ci.sham=!0;var Ni=!ji||Si((function(){var t;return Ii(Ii.call)||!Ii(Object)||!Ii((function(){t=!0}))||t}))?Ci:Ii,Ri=gi,Ai=Ni,Di=H,Mi=re("species"),Li=Array,Ui=function(t){var e;return Ri(t)&&(e=t.constructor,(Ai(e)&&(e===Li||Ri(e.prototype))||Di(e)&&null===(e=e[Mi]))&&(e=void 0)),void 0===e?Li:e},Fi=function(t,e){return new(Ui(t))(0===e?0:e)},Vi=yi,zi=F,Bi=Lt,Ki=fn,Gi=Fi,Wi=I([].push),Ji=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,c=7==t,u=5==t||i;return function(a,f,s,l){for(var p,d,v=Bi(a),h=zi(v),y=Vi(f,s),m=Ki(h),g=0,b=l||Gi,S=e?b(a,m):r||c?b(a,0):void 0;m>g;g++)if((u||g in h)&&(d=y(p=h[g],g,v),t))if(e)S[g]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:Wi(S,p)}else switch(t){case 4:return!1;case 7:Wi(S,p)}return i?-1:n||o?o:S}},Hi={forEach:Ji(0),map:Ji(1),filter:Ji(2),some:Ji(3),every:Ji(4),find:Ji(5),findIndex:Ji(6),filterReject:Ji(7)},$i=qn,Xi=s,Yi=m,qi=I,Qi=d,Zi=ft,tc=p,ec=Vt,rc=Q,nc=Ae,oc=G,ic=de,cc=ho,uc=x,ac=Mo,fc=to,sc=Xr,lc=Lo,pc=xn,dc=l,vc=Te,hc=yo,yc=g,mc=$r,gc=Pt.exports,bc=vr,Sc=Wt,_c=re,wc=Zo,Oc=function(t){var e=ei.Symbol||(ei.Symbol={});ri(e,t)||oi(e,t,{value:ni.f(t)})},xc=function(){var t=ci("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=ui("toPrimitive");e&&!e[n]&&ai(e,n,(function(t){return ii(r,this)}),{arity:1})},Ec=pi,jc=Cr,kc=Hi.forEach,Pc=dr("hidden"),Tc=jc.set,Ic=jc.getterFor("Symbol"),Cc=Object.prototype,Nc=Xi.Symbol,Rc=Nc&&Nc.prototype,Ac=Xi.TypeError,Dc=Xi.QObject,Mc=dc.f,Lc=vc.f,Uc=lc.f,Fc=yc.f,Vc=qi([].push),zc=gc("symbols"),Bc=gc("op-symbols"),Kc=gc("wks"),Gc=!Dc||!Dc.prototype||!Dc.prototype.findChild,Wc=Qi&&tc((function(){return 7!=ac(Lc({},"a",{get:function(){return Lc(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=Mc(Cc,e);n&&delete Cc[e],Lc(t,e,r),n&&t!==Cc&&Lc(Cc,e,n)}:Lc,Jc=function(t,e){var r=zc[t]=ac(Rc);return Tc(r,{type:"Symbol",tag:t,description:e}),Qi||(r.description=e),r},Hc=function(t,e,r){t===Cc&&Hc(Bc,e,r),nc(t);var n=ic(e);return nc(r),ec(zc,n)?(r.enumerable?(ec(t,Pc)&&t[Pc][n]&&(t[Pc][n]=!1),r=ac(r,{enumerable:uc(0,!1)})):(ec(t,Pc)||Lc(t,Pc,uc(1,{})),t[Pc][n]=!0),Wc(t,n,r)):Lc(t,n,r)},$c=function(t,e){nc(t);var r=oc(e),n=fc(r).concat(Qc(r));return kc(n,(function(e){Qi&&!Yi(Xc,r,e)||Hc(t,e,r[e])})),t},Xc=function(t){var e=ic(t),r=Yi(Fc,this,e);return!(this===Cc&&ec(zc,e)&&!ec(Bc,e))&&(!(r||!ec(this,e)||!ec(zc,e)||ec(this,Pc)&&this[Pc][e])||r)},Yc=function(t,e){var r=oc(t),n=ic(e);if(r!==Cc||!ec(zc,n)||ec(Bc,n)){var o=Mc(r,n);return!o||!ec(zc,n)||ec(r,Pc)&&r[Pc][n]||(o.enumerable=!0),o}},qc=function(t){var e=Uc(oc(t)),r=[];return kc(e,(function(t){ec(zc,t)||ec(bc,t)||Vc(r,t)})),r},Qc=function(t){var e=t===Cc,r=Uc(e?Bc:oc(t)),n=[];return kc(r,(function(t){!ec(zc,t)||e&&!ec(Cc,t)||Vc(n,zc[t])})),n};Zi||(mc(Rc=(Nc=function(){if(rc(Rc,this))throw Ac("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?cc(arguments[0]):void 0,e=Sc(t),r=function(t){this===Cc&&Yi(r,Bc,t),ec(this,Pc)&&ec(this[Pc],e)&&(this[Pc][e]=!1),Wc(this,e,uc(1,t))};return Qi&&Gc&&Wc(Cc,e,{configurable:!0,set:r}),Jc(e,t)}).prototype,"toString",(function(){return Ic(this).tag})),mc(Nc,"withoutSetter",(function(t){return Jc(Sc(t),t)})),yc.f=Xc,vc.f=Hc,hc.f=$c,dc.f=Yc,sc.f=lc.f=qc,pc.f=Qc,wc.f=function(t){return Jc(_c(t),t)},Qi&&(Lc(Rc,"description",{configurable:!0,get:function(){return Ic(this).description}}),mc(Cc,"propertyIsEnumerable",Xc,{unsafe:!0}))),$i({global:!0,constructor:!0,wrap:!0,forced:!Zi,sham:!Zi},{Symbol:Nc}),kc(fc(Kc),(function(t){Oc(t)})),$i({target:"Symbol",stat:!0,forced:!Zi},{useSetter:function(){Gc=!0},useSimple:function(){Gc=!1}}),$i({target:"Object",stat:!0,forced:!Zi,sham:!Qi},{create:function(t,e){return void 0===e?ac(t):$c(ac(t),e)},defineProperty:Hc,defineProperties:$c,getOwnPropertyDescriptor:Yc}),$i({target:"Object",stat:!0,forced:!Zi},{getOwnPropertyNames:qc}),xc(),Ec(Nc,"Symbol"),bc[Pc]=!0;var Zc=ft&&!!Symbol.for&&!!Symbol.keyFor,tu=qn,eu=q,ru=Vt,nu=ho,ou=Pt.exports,iu=Zc,cu=ou("string-to-symbol-registry"),uu=ou("symbol-to-string-registry");tu({target:"Symbol",stat:!0,forced:!iu},{for:function(t){var e=nu(t);if(ru(cu,e))return cu[e];var r=eu("Symbol")(e);return cu[e]=r,uu[r]=e,r}});var au=qn,fu=Vt,su=ht,lu=mt,pu=Zc,du=(0,Pt.exports)("symbol-to-string-registry");au({target:"Symbol",stat:!0,forced:!pu},{keyFor:function(t){if(!su(t))throw TypeError(lu(t)+" is not a symbol");if(fu(du,t))return du[t]}});var vu=v,hu=Function.prototype,yu=hu.apply,mu=hu.call,gu="object"==typeof Reflect&&Reflect.apply||(vu?mu.bind(yu):function(){return mu.apply(yu,arguments)}),bu=I([].slice),Su=qn,_u=q,wu=gu,Ou=m,xu=I,Eu=p,ju=gi,ku=W,Pu=H,Tu=ht,Iu=bu,Cu=ft,Nu=_u("JSON","stringify"),Ru=xu(/./.exec),Au=xu("".charAt),Du=xu("".charCodeAt),Mu=xu("".replace),Lu=xu(1..toString),Uu=/[\uD800-\uDFFF]/g,Fu=/^[\uD800-\uDBFF]$/,Vu=/^[\uDC00-\uDFFF]$/,zu=!Cu||Eu((function(){var t=_u("Symbol")();return"[null]"!=Nu([t])||"{}"!=Nu({a:t})||"{}"!=Nu(Object(t))})),Bu=Eu((function(){return'"\\udf06\\ud834"'!==Nu("\udf06\ud834")||'"\\udead"'!==Nu("\udead")})),Ku=function(t,e){var r=Iu(arguments),n=e;if((Pu(e)||void 0!==t)&&!Tu(t))return ju(e)||(e=function(t,e){if(ku(n)&&(e=Ou(n,this,t,e)),!Tu(e))return e}),r[1]=e,wu(Nu,null,r)},Gu=function(t,e,r){var n=Au(r,e-1),o=Au(r,e+1);return Ru(Fu,t)&&!Ru(Vu,o)||Ru(Vu,t)&&!Ru(Fu,n)?"\\u"+Lu(Du(t,0),16):t};Nu&&Su({target:"JSON",stat:!0,arity:3,forced:zu||Bu},{stringify:function(t,e,r){var n=Iu(arguments),o=wu(zu?Ku:Nu,null,n);return Bu&&"string"==typeof o?Mu(o,Uu,Gu):o}});var Wu=xn,Ju=Lt;qn({target:"Object",stat:!0,forced:!ft||p((function(){Wu.f(1)}))},{getOwnPropertySymbols:function(t){var e=Wu.f;return e?e(Ju(t)):[]}});var Hu=p,$u=ct,Xu=re("species"),Yu=function(t){return $u>=51||!Hu((function(){var e=[];return(e.constructor={})[Xu]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},qu=Hi.filter;qn({target:"Array",proto:!0,forced:!Yu("filter")},{filter:function(t){return qu(this,t,arguments.length>1?arguments[1]:void 0)}});var Qu=qn,Zu=p,ta=G,ea=l.f,ra=d,na=Zu((function(){ea(1)}));Qu({target:"Object",stat:!0,forced:!ra||na,sham:!ra},{getOwnPropertyDescriptor:function(t,e){return ea(ta(t),e)}});var oa=me("span").classList,ia=oa&&oa.constructor&&oa.constructor.prototype,ca=ia===Object.prototype?void 0:ia,ua=p,aa=function(t,e){var r=[][t];return!!r&&ua((function(){r.call(null,e||function(){return 1},1)}))},fa=Hi.forEach,sa=aa("forEach")?[].forEach:function(t){return fa(this,t,arguments.length>1?arguments[1]:void 0)},la=s,pa={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},da=ca,va=sa,ha=We,ya=function(t){if(t&&t.forEach!==va)try{ha(t,"forEach",va)}catch(e){t.forEach=va}};for(var ma in pa)pa[ma]&&ya(la[ma]&&la[ma].prototype);ya(da);var ga=In,ba=G,Sa=l,_a=zo;qn({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(t){for(var e,r,n=ba(t),o=Sa.f,i=ga(n),c={},u=0;i.length>u;)void 0!==(r=o(n,e=i[u++]))&&_a(c,e,r);return c}});var wa=qn,Oa=d,xa=yo.f;wa({target:"Object",stat:!0,forced:Object.defineProperties!==xa,sham:!Oa},{defineProperties:xa});var Ea=qn,ja=d,ka=Te.f;Ea({target:"Object",stat:!0,forced:Object.defineProperty!==ka,sham:!ja},{defineProperty:ka});var Pa,Ta={exports:{}};(Pa=Ta).exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Pa.exports.__esModule=!0,Pa.exports.default=Pa.exports;var Ia=a(Ta.exports),Ca={exports:{}};!function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(Ca);var Na=a(Ca.exports),Ra={exports:{}};!function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}(Ra);var Aa,Da=a(Ra.exports),Ma=H,La=A,Ua=re("match"),Fa=function(t){var e;return Ma(t)&&(void 0!==(e=t[Ua])?!!e:"RegExp"==La(t))},Va=Fa,za=TypeError,Ba=function(t){if(Va(t))throw za("The method doesn't accept regular expressions");return t},Ka=re("match"),Ga=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[Ka]=!1,"/./"[t](e)}catch(t){}}return!1},Wa=qn,Ja=I,Ha=l.f,$a=un,Xa=ho,Ya=Ba,qa=z,Qa=Ga,Za=Ja("".startsWith),tf=Ja("".slice),ef=Math.min,rf=Qa("startsWith");Wa({target:"String",proto:!0,forced:!!(rf||(Aa=Ha(String.prototype,"startsWith"),!Aa||Aa.writable))&&!rf},{startsWith:function(t){var e=Xa(qa(this));Ya(t);var r=$a(ef(arguments.length>1?arguments[1]:void 0,e.length)),n=Xa(t);return Za?Za(e,n,r):tf(e,r,r+n.length)===n}});var nf=qn,of=gi,cf=Ni,uf=H,af=nn,ff=fn,sf=G,lf=zo,pf=re,df=bu,vf=Yu("slice"),hf=pf("species"),yf=Array,mf=Math.max;nf({target:"Array",proto:!0,forced:!vf},{slice:function(t,e){var r,n,o,i=sf(this),c=ff(i),u=af(t,c),a=af(void 0===e?c:e,c);if(of(i)&&(r=i.constructor,(cf(r)&&(r===yf||of(r.prototype))||uf(r)&&null===(r=r[hf]))&&(r=void 0),r===yf||void 0===r))return df(i,u,a);for(n=new(void 0===r?yf:r)(mf(a-u,0)),o=0;u<a;u++,o++)u in i&&lf(n,o,i[u]);return n.length=o,n}});var gf=TypeError,bf=qn,Sf=p,_f=gi,wf=H,Of=Lt,xf=fn,Ef=function(t){if(t>9007199254740991)throw gf("Maximum allowed index exceeded");return t},jf=zo,kf=Fi,Pf=Yu,Tf=ct,If=re("isConcatSpreadable"),Cf=Tf>=51||!Sf((function(){var t=[];return t[If]=!1,t.concat()[0]!==t})),Nf=Pf("concat"),Rf=function(t){if(!wf(t))return!1;var e=t[If];return void 0!==e?!!e:_f(t)};bf({target:"Array",proto:!0,arity:1,forced:!Cf||!Nf},{concat:function(t){var e,r,n,o,i,c=Of(this),u=kf(c,0),a=0;for(e=-1,n=arguments.length;e<n;e++)if(Rf(i=-1===e?c:arguments[e]))for(o=xf(i),Ef(a+o),r=0;r<o;r++,a++)r in i&&jf(u,a,i[r]);else Ef(a+1),jf(u,a++,i);return u.length=a,u}});var Af=re,Df=Mo,Mf=Te.f,Lf=Af("unscopables"),Uf=Array.prototype;null==Uf[Lf]&&Mf(Uf,Lf,{configurable:!0,value:Df(null)});var Ff=function(t){Uf[Lf][t]=!0},Vf=vn.includes,zf=Ff;qn({target:"Array",proto:!0,forced:p((function(){return!Array(1).includes()}))},{includes:function(t){return Vf(this,t,arguments.length>1?arguments[1]:void 0)}}),zf("includes");var Bf=qn,Kf=Ba,Gf=z,Wf=ho,Jf=Ga,Hf=I("".indexOf);Bf({target:"String",proto:!0,forced:!Jf("includes")},{includes:function(t){return!!~Hf(Wf(Gf(this)),Wf(Kf(t)),arguments.length>1?arguments[1]:void 0)}});var $f,Xf,Yf=Ae,qf=p,Qf=s.RegExp,Zf=qf((function(){var t=Qf("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),ts=Zf||qf((function(){return!Qf("a","y").sticky})),es={BROKEN_CARET:Zf||qf((function(){var t=Qf("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:ts,UNSUPPORTED_Y:Zf},rs=p,ns=s.RegExp,os=rs((function(){var t=ns(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),is=p,cs=s.RegExp,us=is((function(){var t=cs("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),as=m,fs=I,ss=ho,ls=function(){var t=Yf(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},ps=es,ds=Pt.exports,vs=Mo,hs=Cr.get,ys=os,ms=us,gs=ds("native-string-replace",String.prototype.replace),bs=RegExp.prototype.exec,Ss=bs,_s=fs("".charAt),ws=fs("".indexOf),Os=fs("".replace),xs=fs("".slice),Es=(Xf=/b*/g,as(bs,$f=/a/,"a"),as(bs,Xf,"a"),0!==$f.lastIndex||0!==Xf.lastIndex),js=ps.BROKEN_CARET,ks=void 0!==/()??/.exec("")[1];(Es||ks||js||ys||ms)&&(Ss=function(t){var e,r,n,o,i,c,u,a=this,f=hs(a),s=ss(t),l=f.raw;if(l)return l.lastIndex=a.lastIndex,e=as(Ss,l,s),a.lastIndex=l.lastIndex,e;var p=f.groups,d=js&&a.sticky,v=as(ls,a),h=a.source,y=0,m=s;if(d&&(v=Os(v,"y",""),-1===ws(v,"g")&&(v+="g"),m=xs(s,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==_s(s,a.lastIndex-1))&&(h="(?: "+h+")",m=" "+m,y++),r=new RegExp("^(?:"+h+")",v)),ks&&(r=new RegExp("^"+h+"$(?!\\s)",v)),Es&&(n=a.lastIndex),o=as(bs,d?r:a,m),d?o?(o.input=xs(o.input,y),o[0]=xs(o[0],y),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:Es&&o&&(a.lastIndex=a.global?o.index+o[0].length:n),ks&&o&&o.length>1&&as(gs,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=c=vs(null),i=0;i<p.length;i++)c[(u=p[i])[0]]=o[u[1]];return o});var Ps=Ss;qn({target:"RegExp",proto:!0,forced:/./.exec!==Ps},{exec:Ps});var Ts=I,Is=$r,Cs=Ps,Ns=p,Rs=re,As=We,Ds=Rs("species"),Ms=RegExp.prototype,Ls=Ni,Us=mt,Fs=TypeError,Vs=Ae,zs=function(t){if(Ls(t))return t;throw Fs(Us(t)+" is not a constructor")},Bs=re("species"),Ks=function(t,e){var r,n=Vs(t).constructor;return void 0===n||null==(r=Vs(n)[Bs])?e:zs(r)},Gs=I,Ws=Zr,Js=ho,Hs=z,$s=Gs("".charAt),Xs=Gs("".charCodeAt),Ys=Gs("".slice),qs=function(t){return function(e,r){var n,o,i=Js(Hs(e)),c=Ws(r),u=i.length;return c<0||c>=u?t?"":void 0:(n=Xs(i,c))<55296||n>56319||c+1===u||(o=Xs(i,c+1))<56320||o>57343?t?$s(i,c):n:t?Ys(i,c,c+2):o-56320+(n-55296<<10)+65536}},Qs={codeAt:qs(!1),charAt:qs(!0)}.charAt,Zs=m,tl=Ae,el=W,rl=A,nl=Ps,ol=TypeError,il=gu,cl=m,ul=I,al=function(t,e,r,n){var o=Rs(t),i=!Ns((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=i&&!Ns((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Ds]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!c||r){var u=Ts(/./[o]),a=e(o,""[t],(function(t,e,r,n,o){var c=Ts(t),a=e.exec;return a===Cs||a===Ms.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:c(r,e,n)}:{done:!1}}));Is(String.prototype,t,a[0]),Is(Ms,o,a[1])}n&&As(Ms[o],"sham",!0)},fl=Fa,sl=Ae,ll=z,pl=Ks,dl=function(t,e,r){return e+(r?Qs(t,e).length:1)},vl=un,hl=ho,yl=Ot,ml=Ho,gl=function(t,e){var r=t.exec;if(el(r)){var n=Zs(r,t,e);return null!==n&&tl(n),n}if("RegExp"===rl(t))return Zs(nl,t,e);throw ol("RegExp#exec called on incompatible receiver")},bl=Ps,Sl=p,_l=es.UNSUPPORTED_Y,wl=Math.min,Ol=[].push,xl=ul(/./.exec),El=ul(Ol),jl=ul("".slice);al("split",(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=hl(ll(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!fl(t))return cl(e,n,t,o);for(var i,c,u,a=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,f+"g");(i=cl(bl,l,n))&&!((c=l.lastIndex)>s&&(El(a,jl(n,s,i.index)),i.length>1&&i.index<n.length&&il(Ol,a,ml(i,1)),u=i[0].length,s=c,a.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return s===n.length?!u&&xl(l,"")||El(a,""):El(a,jl(n,s)),a.length>o?ml(a,0,o):a}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:cl(e,this,t,r)}:e,[function(e,r){var o=ll(this),i=null==e?void 0:yl(e,t);return i?cl(i,e,o,r):cl(n,hl(o),e,r)},function(t,o){var i=sl(this),c=hl(t),u=r(n,i,c,o,n!==e);if(u.done)return u.value;var a=pl(i,RegExp),f=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(_l?"g":"y"),l=new a(_l?"^(?:"+i.source+")":i,s),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===c.length)return null===gl(l,c)?[c]:[];for(var d=0,v=0,h=[];v<c.length;){l.lastIndex=_l?0:v;var y,m=gl(l,_l?jl(c,v):c);if(null===m||(y=wl(vl(l.lastIndex+(_l?v:0)),c.length))===d)v=dl(c,v,f);else{if(El(h,jl(c,d,v)),h.length===p)return h;for(var g=1;g<=m.length-1;g++)if(El(h,m[g]),h.length===p)return h;v=d=y}}return El(h,jl(c,d)),h}]}),!!Sl((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),_l);var kl=lo,Pl=oo?{}.toString:function(){return"[object "+kl(this)+"]"};oo||$r(Object.prototype,"toString",Pl,{unsafe:!0});var Tl,Il,Cl,Nl,Rl="process"==A(s.process),Al=W,Dl=String,Ml=TypeError,Ll=I,Ul=Ae,Fl=function(t){if("object"==typeof t||Al(t))return t;throw Ml("Can't set "+Dl(t)+" as a prototype")},Vl=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Ll(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return Ul(r),Fl(n),e?t(r,n):r.__proto__=n,r}}():void 0),zl=q,Bl=Te,Kl=d,Gl=re("species"),Wl=Q,Jl=TypeError,Hl=TypeError,$l=function(t,e){if(t<e)throw Hl("Not enough arguments");return t},Xl=/(?:ipad|iphone|ipod).*applewebkit/i.test(Z),Yl=s,ql=gu,Ql=yi,Zl=W,tp=Vt,ep=p,rp=xo,np=bu,op=me,ip=$l,cp=Xl,up=Rl,ap=Yl.setImmediate,fp=Yl.clearImmediate,sp=Yl.process,lp=Yl.Dispatch,pp=Yl.Function,dp=Yl.MessageChannel,vp=Yl.String,hp=0,yp={};try{Tl=Yl.location}catch(t){}var mp=function(t){if(tp(yp,t)){var e=yp[t];delete yp[t],e()}},gp=function(t){return function(){mp(t)}},bp=function(t){mp(t.data)},Sp=function(t){Yl.postMessage(vp(t),Tl.protocol+"//"+Tl.host)};ap&&fp||(ap=function(t){ip(arguments.length,1);var e=Zl(t)?t:pp(t),r=np(arguments,1);return yp[++hp]=function(){ql(e,void 0,r)},Il(hp),hp},fp=function(t){delete yp[t]},up?Il=function(t){sp.nextTick(gp(t))}:lp&&lp.now?Il=function(t){lp.now(gp(t))}:dp&&!cp?(Nl=(Cl=new dp).port2,Cl.port1.onmessage=bp,Il=Ql(Nl.postMessage,Nl)):Yl.addEventListener&&Zl(Yl.postMessage)&&!Yl.importScripts&&Tl&&"file:"!==Tl.protocol&&!ep(Sp)?(Il=Sp,Yl.addEventListener("message",bp,!1)):Il="onreadystatechange"in op("script")?function(t){rp.appendChild(op("script")).onreadystatechange=function(){rp.removeChild(this),mp(t)}}:function(t){setTimeout(gp(t),0)});var _p,wp,Op,xp,Ep,jp,kp,Pp,Tp={set:ap,clear:fp},Ip=s,Cp=/ipad|iphone|ipod/i.test(Z)&&void 0!==Ip.Pebble,Np=/web0s(?!.*chrome)/i.test(Z),Rp=s,Ap=yi,Dp=l.f,Mp=Tp.set,Lp=Xl,Up=Cp,Fp=Np,Vp=Rl,zp=Rp.MutationObserver||Rp.WebKitMutationObserver,Bp=Rp.document,Kp=Rp.process,Gp=Rp.Promise,Wp=Dp(Rp,"queueMicrotask"),Jp=Wp&&Wp.value;Jp||(_p=function(){var t,e;for(Vp&&(t=Kp.domain)&&t.exit();wp;){e=wp.fn,wp=wp.next;try{e()}catch(t){throw wp?xp():Op=void 0,t}}Op=void 0,t&&t.enter()},Lp||Vp||Fp||!zp||!Bp?!Up&&Gp&&Gp.resolve?((kp=Gp.resolve(void 0)).constructor=Gp,Pp=Ap(kp.then,kp),xp=function(){Pp(_p)}):Vp?xp=function(){Kp.nextTick(_p)}:(Mp=Ap(Mp,Rp),xp=function(){Mp(_p)}):(Ep=!0,jp=Bp.createTextNode(""),new zp(_p).observe(jp,{characterData:!0}),xp=function(){jp.data=Ep=!Ep}));var Hp=Jp||function(t){var e={fn:t,next:void 0};Op&&(Op.next=e),wp||(wp=e,xp()),Op=e},$p=s,Xp=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Yp=function(){this.head=null,this.tail=null};Yp.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var qp=Yp,Qp=s.Promise,Zp="object"==typeof window&&"object"!=typeof Deno,td=s,ed=Qp,rd=W,nd=Kn,od=ir,id=re,cd=Zp,ud=ct;ed&&ed.prototype;var ad=id("species"),fd=!1,sd=rd(td.PromiseRejectionEvent),ld=nd("Promise",(function(){var t=od(ed),e=t!==String(ed);if(!e&&66===ud)return!0;if(ud>=51&&/native code/.test(t))return!1;var r=new ed((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[ad]=n,!(fd=r.then((function(){}))instanceof n)||!e&&cd&&!sd})),pd={CONSTRUCTOR:ld,REJECTION_EVENT:sd,SUBCLASSING:fd},dd={},vd=_t,hd=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=vd(e),this.reject=vd(r)};dd.f=function(t){return new hd(t)};var yd,md,gd,bd=qn,Sd=Rl,_d=s,wd=m,Od=$r,xd=Vl,Ed=pi,jd=function(t){var e=zl(t),r=Bl.f;Kl&&e&&!e[Gl]&&r(e,Gl,{configurable:!0,get:function(){return this}})},kd=_t,Pd=W,Td=H,Id=function(t,e){if(Wl(e,t))return t;throw Jl("Incorrect invocation")},Cd=Ks,Nd=Tp.set,Rd=Hp,Ad=function(t,e){var r=$p.console;r&&r.error},Dd=Xp,Md=qp,Ld=Cr,Ud=Qp,Fd=dd,Vd=pd.CONSTRUCTOR,zd=pd.REJECTION_EVENT,Bd=pd.SUBCLASSING,Kd=Ld.getterFor("Promise"),Gd=Ld.set,Wd=Ud&&Ud.prototype,Jd=Ud,Hd=Wd,$d=_d.TypeError,Xd=_d.document,Yd=_d.process,qd=Fd.f,Qd=qd,Zd=!!(Xd&&Xd.createEvent&&_d.dispatchEvent),tv=function(t){var e;return!(!Td(t)||!Pd(e=t.then))&&e},ev=function(t,e){var r,n,o,i=e.value,c=1==e.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,s=t.domain;try{u?(c||(2===e.rejection&&cv(e),e.rejection=1),!0===u?r=i:(s&&s.enter(),r=u(i),s&&(s.exit(),o=!0)),r===t.promise?f($d("Promise-chain cycle")):(n=tv(r))?wd(n,r,a,f):a(r)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},rv=function(t,e){t.notified||(t.notified=!0,Rd((function(){for(var r,n=t.reactions;r=n.get();)ev(r,t);t.notified=!1,e&&!t.rejection&&ov(t)})))},nv=function(t,e,r){var n,o;Zd?((n=Xd.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),_d.dispatchEvent(n)):n={promise:e,reason:r},!zd&&(o=_d["on"+t])?o(n):"unhandledrejection"===t&&Ad("Unhandled promise rejection",r)},ov=function(t){wd(Nd,_d,(function(){var e,r=t.facade,n=t.value;if(iv(t)&&(e=Dd((function(){Sd?Yd.emit("unhandledRejection",n,r):nv("unhandledrejection",r,n)})),t.rejection=Sd||iv(t)?2:1,e.error))throw e.value}))},iv=function(t){return 1!==t.rejection&&!t.parent},cv=function(t){wd(Nd,_d,(function(){var e=t.facade;Sd?Yd.emit("rejectionHandled",e):nv("rejectionhandled",e,t.value)}))},uv=function(t,e,r){return function(n){t(e,n,r)}},av=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,rv(t,!0))},fv=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw $d("Promise can't be resolved itself");var n=tv(e);n?Rd((function(){var r={done:!1};try{wd(n,e,uv(fv,r,t),uv(av,r,t))}catch(e){av(r,e,t)}})):(t.value=e,t.state=1,rv(t,!1))}catch(e){av({done:!1},e,t)}}};if(Vd&&(Hd=(Jd=function(t){Id(this,Hd),kd(t),wd(yd,this);var e=Kd(this);try{t(uv(fv,e),uv(av,e))}catch(t){av(e,t)}}).prototype,(yd=function(t){Gd(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Md,rejection:!1,state:0,value:void 0})}).prototype=Od(Hd,"then",(function(t,e){var r=Kd(this),n=qd(Cd(this,Jd));return r.parent=!0,n.ok=!Pd(t)||t,n.fail=Pd(e)&&e,n.domain=Sd?Yd.domain:void 0,0==r.state?r.reactions.add(n):Rd((function(){ev(n,r)})),n.promise})),md=function(){var t=new yd,e=Kd(t);this.promise=t,this.resolve=uv(fv,e),this.reject=uv(av,e)},Fd.f=qd=function(t){return t===Jd||undefined===t?new md(t):Qd(t)},Pd(Ud)&&Wd!==Object.prototype)){gd=Wd.then,Bd||Od(Wd,"then",(function(t,e){var r=this;return new Jd((function(t,e){wd(gd,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Wd.constructor}catch(t){}xd&&xd(Wd,Hd)}bd({global:!0,constructor:!0,wrap:!0,forced:Vd},{Promise:Jd}),Ed(Jd,"Promise",!1),jd("Promise");var sv={},lv=sv,pv=re("iterator"),dv=Array.prototype,vv=lo,hv=Ot,yv=sv,mv=re("iterator"),gv=function(t){if(null!=t)return hv(t,mv)||hv(t,"@@iterator")||yv[vv(t)]},bv=m,Sv=_t,_v=Ae,wv=mt,Ov=gv,xv=TypeError,Ev=m,jv=Ae,kv=Ot,Pv=yi,Tv=m,Iv=Ae,Cv=mt,Nv=function(t){return void 0!==t&&(lv.Array===t||dv[pv]===t)},Rv=fn,Av=Q,Dv=function(t,e){var r=arguments.length<2?Ov(t):e;if(Sv(r))return _v(bv(r,t));throw xv(wv(t)+" is not iterable")},Mv=gv,Lv=function(t,e,r){var n,o;jv(t);try{if(!(n=kv(t,"return"))){if("throw"===e)throw r;return r}n=Ev(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return jv(n),r},Uv=TypeError,Fv=function(t,e){this.stopped=t,this.result=e},Vv=Fv.prototype,zv=function(t,e,r){var n,o,i,c,u,a,f,s=r&&r.that,l=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),d=!(!r||!r.INTERRUPTED),v=Pv(e,s),h=function(t){return n&&Lv(n,"normal",t),new Fv(!0,t)},y=function(t){return l?(Iv(t),d?v(t[0],t[1],h):v(t[0],t[1])):d?v(t,h):v(t)};if(p)n=t;else{if(!(o=Mv(t)))throw Uv(Cv(t)+" is not iterable");if(Nv(o)){for(i=0,c=Rv(t);c>i;i++)if((u=y(t[i]))&&Av(Vv,u))return u;return new Fv(!1)}n=Dv(t,o)}for(a=n.next;!(f=Tv(a,n)).done;){try{u=y(f.value)}catch(t){Lv(n,"throw",t)}if("object"==typeof u&&u&&Av(Vv,u))return u}return new Fv(!1)},Bv=re("iterator"),Kv=!1;try{var Gv=0,Wv={next:function(){return{done:!!Gv++}},return:function(){Kv=!0}};Wv[Bv]=function(){return this},Array.from(Wv,(function(){throw 2}))}catch(t){}var Jv=Qp,Hv=function(t,e){if(!e&&!Kv)return!1;var r=!1;try{var n={};n[Bv]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},$v=pd.CONSTRUCTOR||!Hv((function(t){Jv.all(t).then(void 0,(function(){}))})),Xv=m,Yv=_t,qv=dd,Qv=Xp,Zv=zv;qn({target:"Promise",stat:!0,forced:$v},{all:function(t){var e=this,r=qv.f(e),n=r.resolve,o=r.reject,i=Qv((function(){var r=Yv(e.resolve),i=[],c=0,u=1;Zv(t,(function(t){var a=c++,f=!1;u++,Xv(r,e,t).then((function(t){f||(f=!0,i[a]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var th=qn,eh=pd.CONSTRUCTOR,rh=Qp,nh=q,oh=W,ih=$r,ch=rh&&rh.prototype;if(th({target:"Promise",proto:!0,forced:eh,real:!0},{catch:function(t){return this.then(void 0,t)}}),oh(rh)){var uh=nh("Promise").prototype.catch;ch.catch!==uh&&ih(ch,"catch",uh,{unsafe:!0})}var ah=m,fh=_t,sh=dd,lh=Xp,ph=zv;qn({target:"Promise",stat:!0,forced:$v},{race:function(t){var e=this,r=sh.f(e),n=r.reject,o=lh((function(){var o=fh(e.resolve);ph(t,(function(t){ah(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var dh=m,vh=dd;qn({target:"Promise",stat:!0,forced:pd.CONSTRUCTOR},{reject:function(t){var e=vh.f(this);return dh(e.reject,void 0,t),e.promise}});var hh=Ae,yh=H,mh=dd,gh=qn,bh=pd.CONSTRUCTOR,Sh=function(t,e){if(hh(t),yh(e)&&e.constructor===t)return e;var r=mh.f(t);return(0,r.resolve)(e),r.promise};q("Promise"),gh({target:"Promise",stat:!0,forced:bh},{resolve:function(t){return Sh(this,t)}});qn({target:"Array",proto:!0,forced:[].forEach!=sa},{forEach:sa});var _h=qn,wh=Date,Oh=I(wh.prototype.getTime);_h({target:"Date",stat:!0},{now:function(){return Oh(new wh)}});var xh=I,Eh=$r,jh=Date.prototype,kh=xh(jh.toString),Ph=xh(jh.getTime);"Invalid Date"!=String(new Date(NaN))&&Eh(jh,"toString",(function(){var t=Ph(this);return t==t?kh(this):"Invalid Date"}));var Th=d,Ih=Qe.EXISTS,Ch=I,Nh=Te.f,Rh=Function.prototype,Ah=Ch(Rh.toString),Dh=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Mh=Ch(Dh.exec);Th&&!Ih&&Nh(Rh,"name",{configurable:!0,get:function(){try{return Mh(Dh,Ah(this))[1]}catch(t){return""}}});var Lh=s,Uh=gu,Fh=W,Vh=bu,zh=$l,Bh=/MSIE .\./.test(Z),Kh=Lh.Function,Gh=function(t){return Bh?function(e,r){var n=zh(arguments.length,1)>2,o=Fh(e)?e:Kh(e),i=n?Vh(arguments,2):void 0;return t(n?function(){Uh(o,this,i)}:o,r)}:t},Wh={setTimeout:Gh(Lh.setTimeout),setInterval:Gh(Lh.setInterval)},Jh=Wh.setInterval;qn({global:!0,bind:!0,forced:s.setInterval!==Jh},{setInterval:Jh});var Hh=Wh.setTimeout;qn({global:!0,bind:!0,forced:s.setTimeout!==Hh},{setTimeout:Hh});var $h=qn,Xh=Hi.find,Yh=Ff,qh=!0;"find"in[]&&Array(1).find((function(){qh=!1})),$h({target:"Array",proto:!0,forced:qh},{find:function(t){return Xh(this,t,arguments.length>1?arguments[1]:void 0)}}),Yh("find");var Qh=Hi.map;qn({target:"Array",proto:!0,forced:!Yu("map")},{map:function(t){return Qh(this,t,arguments.length>1?arguments[1]:void 0)}});var Zh=mt,ty=TypeError,ey=Ho,ry=Math.floor,ny=function(t,e){var r=t.length,n=ry(r/2);return r<8?oy(t,e):iy(t,ny(ey(t,0,n),e),ny(ey(t,n),e),e)},oy=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},iy=function(t,e,r,n){for(var o=e.length,i=r.length,c=0,u=0;c<o||u<i;)t[c+u]=c<o&&u<i?n(e[c],r[u])<=0?e[c++]:r[u++]:c<o?e[c++]:r[u++];return t},cy=ny,uy=Z.match(/firefox\/(\d+)/i),ay=!!uy&&+uy[1],fy=/MSIE|Trident/.test(Z),sy=Z.match(/AppleWebKit\/(\d+)\./),ly=!!sy&&+sy[1],py=qn,dy=I,vy=_t,hy=Lt,yy=fn,my=function(t,e){if(!delete t[e])throw ty("Cannot delete property "+Zh(e)+" of "+Zh(t))},gy=ho,by=p,Sy=cy,_y=aa,wy=ay,Oy=fy,xy=ct,Ey=ly,jy=[],ky=dy(jy.sort),Py=dy(jy.push),Ty=by((function(){jy.sort(void 0)})),Iy=by((function(){jy.sort(null)})),Cy=_y("sort"),Ny=!by((function(){if(xy)return xy<70;if(!(wy&&wy>3)){if(Oy)return!0;if(Ey)return Ey<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)jy.push({k:e+n,v:r})}for(jy.sort((function(t,e){return e.v-t.v})),n=0;n<jy.length;n++)e=jy[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));py({target:"Array",proto:!0,forced:Ty||!Iy||!Cy||!Ny},{sort:function(t){void 0!==t&&vy(t);var e=hy(this);if(Ny)return void 0===t?ky(e):ky(e,t);var r,n,o=[],i=yy(e);for(n=0;n<i;n++)n in e&&Py(o,e[n]);for(Sy(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:gy(e)>gy(r)?1:-1}}(t)),r=o.length,n=0;n<r;)e[n]=o[n++];for(;n<i;)my(e,n++);return e}});var Ry=/http[s]{0,1}:\/\/([\w.]+\/?)\S*/,Ay=function(t){return 1024*t*1024},Dy=function(t){return new Promise((function(e,r){var n=document.createElement("video");n.preload="metadata",n.src=t,n.onloadedmetadata=function(){e({duration:n.duration}),n=null},n.onerror=function(){r(new Error("视频加载失败")),n=null}}))},My=function(t){return t?t.split("//").pop():""},Ly={expireRedundancy:1e4,partsStrategy:[{min:Ay(1024),partSize:Ay(20),concurrentNum:10},{min:Ay(512),partSize:Ay(20),concurrentNum:10},{min:Ay(200),partSize:Ay(15),concurrentNum:10},{min:Ay(100),partSize:Ay(10),concurrentNum:10}],checkIsVideo:function(t){return t.type.startsWith("video/")},videoToVod:!1,needVideoDuration:!1,needVodURL:!1,vodTimesLimit:5,vodTimeInterval:1e3},Uy=Lt,Fy=se;qn({target:"Date",proto:!0,arity:1,forced:p((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=Uy(this),r=Fy(e,"number");return"number"!=typeof r||isFinite(r)?e.toISOString():null}});var Vy=m;function zy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function By(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zy(Object(r),!0).forEach((function(e){Da(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}qn({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Vy(URL.prototype.toString,this)}});var Ky=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Error(t||e.CommonMsg.Message);return n.isThenError=!0,n.result=e,Object.keys(r).forEach((function(t){n[t]=r[t]})),n.toJSON=function(){return By({result:e,isThenError:!0},r)},n};function Gy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gy(Object(r),!0).forEach((function(e){Da(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Jy=function(){function u(t,e){Ia(this,u),Da(this,"VERSION","1.0.0"),Da(this,"_options",{}),Da(this,"obsClient",null),Da(this,"_bucketName",null),Da(this,"_obsServer",null),Da(this,"_tokenCreateTime",null),Da(this,"_tokenExpire",null),this._init(t,e)}return Na(u,[{key:"_init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e(Wy(Wy({},Ly),n));t.bucketName&&(this._bucketName=t.bucketName),o.videoToVod&&(r(n.apiObsToVod)||console.warn("当需要将视频上传到vod时，apiObsToVod 方法必传，且必须反回一个promise")),o.needVodURL&&(r(n.apiVodDetails)||console.warn("当需要获取视频vod播放地址时，apiVodDetails 方法必传，且必须反回一个promise")),this._options=t,this.config=o}},{key:"_fillServer",value:function(t){return function(t){return Ry.test(t)}(t)||t.startsWith("//")?t:"https://".concat(t)}},{key:"_getUploadKey",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return t&&t.startsWith("/")&&(t=t.slice(1)),"".concat(t).concat(n()).concat(this._getFileType(e))}},{key:"_getFileType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";try{if(t.includes(".")){var r=t.split(".");e=r[r.length-1]}}catch(t){e=""}return e?".".concat(e):""}},{key:"getClient",value:function(){var e=this;return new Promise((function(r,n){var o=function(){var o=e._options,i=["timeout","is_cname","useRawXhr"],c=e._warn;if(o.ak&&o.sk&&o.server){var u=o.server,a={access_key_id:o.ak,secret_access_key:o.sk,server:u};i.forEach((function(t){t in o&&(a[t]=o[t])}));["ak","sk","server","bucketName"].forEach((function(t){o[t]||c("参数：'".concat(t,"' 为必传参数"))})),e._bucketName=o.bucketName,e._obsServer=u,e.obsClient=new t(a),e._tokenExpire=0,r(e.obsClient)}else o.getAuthorization?o.getAuthorization({}).then((function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=["ak","sk"];u.forEach((function(t){n[t]||c("参数：'".concat(t,"' 为必传参数"))}));var a=n.server||e._obsServer||null;a||c("参数：'server' 为必传参数");var f={access_key_id:n.ak,secret_access_key:n.sk,server:a};e._obsServer=a,i.forEach((function(t){t in o&&(f[t]=o[t])})),n.securityToken&&(f.security_token=n.securityToken),n.expireSeconds?(e._tokenExpire=1e3*n.expireSeconds,e._tokenCreateTime=Date.now()):e._tokenExpire=-1,n.bucketName&&(e._bucketName=n.bucketName),e.obsClient=new t(f),r(e.obsClient)})).catch((function(t){n(t)})):(n(new Error("未提供初始化参数")),console.warn("未提供初始化参数"))};e.obsClient?0===e._tokenExpire||e._tokenCreateTime&&e._tokenCreateTime+e._tokenExpire-e.config.expireRedundancy>Date.now()?r(e.obsClient):(e.obsClient=null,o()):o()}))}},{key:"upload",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(u,a){var f=e;if(t.file){var s=e.config,l=null,p=null,d=s.checkIsVideo(t.file),v=null;p=s.getUploadKey?s.getUploadKey(t.file,r,n,e._getFileType(t.file.name)):e._getUploadKey(r.folderPath,t.file.name);var h,y=function(e){t.onProgress&&t.onProgress(e)},m=function(r){var n="https://".concat(l,".").concat(My(e._obsServer),"/").concat(r.my_self_key);r.my_slef_server=e._obsServer,r.my_slef_data={key:r.my_self_key,fullUrl:n,isFromVod:!1,obsUrl:n},r.my_slef_data,s.videoToVod&&d?s.apiObsToVod(t.file,{key:p,bucketName:l,server:e._obsServer,obsURL:n}).then((function(t,c){var u=t.code,a=t.data,f=t.msg;200===u?(a.vodId||e._warn("接口:'apiObsToVod' 必须返回 'vodId'"),s.needVodURL&&a.url&&(r.my_slef_data.fullUrl=a.url,r.my_slef_data.isFromVod=!0),r.my_slef_data.vodId=a.vodId,r.my_slef_vod_data=c,s.needVodURL&&!a.url?o((function(){return new Promise((function(t,r){s.apiVodDetails(a.vodId,{key:p,bucketName:l,server:e._obsServer,obsURL:n}).then((function(e){var n=e.data;n&&n.url?t(e):setTimeout((function(){r(new Error(e.msg||"vod 转码中，无法获取播放地址"))}),s.vodTimeInterval)})).catch((function(t){r(new i(t.message))}))}))}),{retries:s.vodTimesLimit}).then((function(t){r.my_slef_data.isFromVod=!0,r.my_slef_data.fullUrl=t.data.url,r.my_slef_vod_details=t,b(r,t.data.duration)})).catch((function(t){t.message,t.my_self_key=r.my_self_key,E(t)})):b(r,a.duration)):E(new Error(f||"obs转换vod失败"))})).catch((function(t){t.my_self_key=r.my_self_key,E(t)})):g(r)},g=function(t){s.needVideoDuration&&d?Dy(t.my_slef_data.obsUrl).then((function(e){t.my_slef_data.duration=e.duration,y({percent:100}),S(t)})).catch((function(e){e.my_self_key=t.my_self_key,E(e)})):(y({percent:100}),S(t))},b=function(t,e){s.needVideoDuration?0!==e&&e?(t.my_slef_data.duration=e,y({percent:100}),S(t)):Dy(t.my_slef_data.obsUrl).then((function(e){t.my_slef_data.duration=e.duration,y({percent:100}),S(t)})).catch((function(e){e.my_self_key=t.my_self_key,E(e)})):(y({percent:100}),S(t))},S=function(e){t.onSuccess&&t.onSuccess(e),u(e)},_=function(){e.getClient().then((function(t){(l=e._bucketName)?(v=t,t.initiateMultipartUpload({Bucket:l,Key:p,ContentType:"text/plain"},(function(t,e){t?E(t):(e.CommonMsg.Status,e.CommonMsg.Status<300&&e.InterfaceResult?(e.InterfaceResult.UploadId,w(e)):E(Ky(null,e)))}))):E(new Error("缺少必传参数：'bucketName'"))})).catch((function(t){E(t)}))},w=function(e){for(var r=0,n=t.file.size,o=function(t){return s.partsStrategy.find((function(e){return t>=e.min}))}(n),i=o.partSize,u=Math.ceil(n/i),a=e.InterfaceResult.UploadId,f=[],d=0;r<u;)!function(e){f.push((function(){return v.uploadPart({Bucket:l,Key:p,PartNumber:e,UploadId:a,SourceFile:t.file,PartSize:i,Offset:(e-1)*i}).then((function(t){var e=++d/u*100|0;return e>95&&(e=95),y({percent:e}),t}))}))}(++r);c(f,{concurrency:o.concurrentNum}).then((function(t){O(u,a)})).catch((function(t){t.my_self_uploadId=a,t.my_self_key=p,E(t)}))},O=function(t,e){v.listParts({Bucket:l,Key:p,UploadId:e},(function(r,n){if(r)r.my_self_uploadId=e,r.my_self_key=p,E(r);else if(n.CommonMsg.Status,n.CommonMsg.Status<300&&n.InterfaceResult)if(n.InterfaceResult.Parts,n.InterfaceResult.Parts.length===t){var o=n.InterfaceResult.Parts.sort((function(t,e){return t.PartNumber-e.PartNumber})).map((function(t){return{PartNumber:t.PartNumber,ETag:JSON.parse(t.ETag)}}));x(o,e)}else E(Ky("片段不完整",n,{my_self_uploadId:e,my_self_key:p}));else E(Ky(null,n,{my_self_uploadId:e,my_self_key:p}))}))},x=function(t,e){v.completeMultipartUpload({Bucket:l,Key:p,UploadId:e,Parts:t},(function(t,e){t?E(t):(e.CommonMsg.Status<300?(e.my_self_direct=!1,e.my_self_key=p,e.my_self_bucketName=l,m(e)):E(Ky(null,e)),e.CommonMsg.Status)}))};!(h=function(){var t=s.partsStrategy;if(t&&t.length>0)return t[t.length-1].min}())||t.file.size<h?e.getClient().then((function(r){(l=e._bucketName)?(v=r,r.putObject({Bucket:l,Key:p,SourceFile:t.file,ProgressCallback:function(t,e,r){var n=t/e*100|0;n>95&&(n=95),y({percent:n})}},(function(t,e){t?E(t):e.CommonMsg.Status<300?(e.my_self_direct=!0,e.my_self_bucketName=l,e.my_self_key=p,m(e)):E(Ky(null,e))}))):E(new Error("缺少必传参数：'bucketName'"))})).catch((function(t){E(t)})):_()}else E(new Error("缺少必传参数：'file'"));function E(e){e.my_self_uploadId&&e.my_self_key&&f.getClient().then((function(t){t.abortMultipartUpload({Bucket:l,Key:e.my_self_key,UploadId:e.my_self_uploadId})})),t.onError&&t.onError(e),a(e)}}))}},{key:"_warn",value:function(t){console.warn(t)}}]),u}();export{Jy as default};
