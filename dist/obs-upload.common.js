/*! obs-upload version 1.0.0 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("esdk-obs-browserjs"),e=require("lodash-es"),r=require("nanoid"),n=require("p-retry"),o=require("p-all");function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=i(t),c=i(n),a=i(o),f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l=function(t){return t&&t.Math==Math&&t},p=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof f&&f)||function(){return this}()||Function("return this")(),d={},v=function(t){try{return!!t()}catch(t){return!0}},h=!v((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y=!v((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),m=y,g=Function.prototype.call,b=m?g.bind(g):function(){return g.apply(g,arguments)},S={},_={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,O=w&&!_.call({1:2},1);S.f=O?function(t){var e=w(this,t);return!!e&&e.enumerable}:_;var x,E,j=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=y,P=Function.prototype,T=P.bind,I=P.call,C=k&&T.bind(I,I),N=k?function(t){return t&&C(t)}:function(t){return t&&function(){return I.apply(t,arguments)}},R=N,A=R({}.toString),D=R("".slice),M=function(t){return D(A(t),8,-1)},L=v,F=M,U=Object,V=N("".split),z=L((function(){return!U("z").propertyIsEnumerable(0)}))?function(t){return"String"==F(t)?V(t,""):U(t)}:U,B=TypeError,K=function(t){if(null==t)throw B("Can't call method on "+t);return t},G=z,W=K,J=function(t){return G(W(t))},q=function(t){return"function"==typeof t},H=q,$=function(t){return"object"==typeof t?null!==t:H(t)},X=p,Y=q,Q=function(t){return Y(t)?t:void 0},Z=function(t,e){return arguments.length<2?Q(X[t]):X[t]&&X[t][e]},tt=N({}.isPrototypeOf),et=Z("navigator","userAgent")||"",rt=p,nt=et,ot=rt.process,it=rt.Deno,ut=ot&&ot.versions||it&&it.version,ct=ut&&ut.v8;ct&&(E=(x=ct.split("."))[0]>0&&x[0]<4?1:+(x[0]+x[1])),!E&&nt&&(!(x=nt.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=nt.match(/Chrome\/(\d+)/))&&(E=+x[1]);var at=E,ft=at,st=v,lt=!!Object.getOwnPropertySymbols&&!st((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ft&&ft<41})),pt=lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,dt=Z,vt=q,ht=tt,yt=Object,mt=pt?function(t){return"symbol"==typeof t}:function(t){var e=dt("Symbol");return vt(e)&&ht(e.prototype,yt(t))},gt=String,bt=function(t){try{return gt(t)}catch(t){return"Object"}},St=q,_t=bt,wt=TypeError,Ot=function(t){if(St(t))return t;throw wt(_t(t)+" is not a function")},xt=Ot,Et=function(t,e){var r=t[e];return null==r?void 0:xt(r)},jt=b,kt=q,Pt=$,Tt=TypeError,It={exports:{}},Ct=p,Nt=Object.defineProperty,Rt=function(t,e){try{Nt(Ct,t,{value:e,configurable:!0,writable:!0})}catch(r){Ct[t]=e}return e},At=Rt,Dt=p["__core-js_shared__"]||At("__core-js_shared__",{}),Mt=Dt;(It.exports=function(t,e){return Mt[t]||(Mt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.8",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.8/LICENSE",source:"https://github.com/zloirock/core-js"});var Lt=K,Ft=Object,Ut=function(t){return Ft(Lt(t))},Vt=Ut,zt=N({}.hasOwnProperty),Bt=Object.hasOwn||function(t,e){return zt(Vt(t),e)},Kt=N,Gt=0,Wt=Math.random(),Jt=Kt(1..toString),qt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Jt(++Gt+Wt,36)},Ht=p,$t=It.exports,Xt=Bt,Yt=qt,Qt=lt,Zt=pt,te=$t("wks"),ee=Ht.Symbol,re=ee&&ee.for,ne=Zt?ee:ee&&ee.withoutSetter||Yt,oe=function(t){if(!Xt(te,t)||!Qt&&"string"!=typeof te[t]){var e="Symbol."+t;Qt&&Xt(ee,t)?te[t]=ee[t]:te[t]=Zt&&re?re(e):ne(e)}return te[t]},ie=b,ue=$,ce=mt,ae=Et,fe=function(t,e){var r,n;if("string"===e&&kt(r=t.toString)&&!Pt(n=jt(r,t)))return n;if(kt(r=t.valueOf)&&!Pt(n=jt(r,t)))return n;if("string"!==e&&kt(r=t.toString)&&!Pt(n=jt(r,t)))return n;throw Tt("Can't convert object to primitive value")},se=TypeError,le=oe("toPrimitive"),pe=function(t,e){if(!ue(t)||ce(t))return t;var r,n=ae(t,le);if(n){if(void 0===e&&(e="default"),r=ie(n,t,e),!ue(r)||ce(r))return r;throw se("Can't convert object to primitive value")}return void 0===e&&(e="number"),fe(t,e)},de=pe,ve=mt,he=function(t){var e=de(t,"string");return ve(e)?e:e+""},ye=$,me=p.document,ge=ye(me)&&ye(me.createElement),be=function(t){return ge?me.createElement(t):{}},Se=be,_e=!h&&!v((function(){return 7!=Object.defineProperty(Se("div"),"a",{get:function(){return 7}}).a})),we=h,Oe=b,xe=S,Ee=j,je=J,ke=he,Pe=Bt,Te=_e,Ie=Object.getOwnPropertyDescriptor;d.f=we?Ie:function(t,e){if(t=je(t),e=ke(e),Te)try{return Ie(t,e)}catch(t){}if(Pe(t,e))return Ee(!Oe(xe.f,t,e),t[e])};var Ce={},Ne=h&&v((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Re=$,Ae=String,De=TypeError,Me=function(t){if(Re(t))return t;throw De(Ae(t)+" is not an object")},Le=h,Fe=_e,Ue=Ne,Ve=Me,ze=he,Be=TypeError,Ke=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor;Ce.f=Le?Ue?function(t,e,r){if(Ve(t),e=ze(e),Ve(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Ge(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Ke(t,e,r)}:Ke:function(t,e,r){if(Ve(t),e=ze(e),Ve(r),Fe)try{return Ke(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Be("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var We=Ce,Je=j,qe=h?function(t,e,r){return We.f(t,e,Je(1,r))}:function(t,e,r){return t[e]=r,t},He={exports:{}},$e=h,Xe=Bt,Ye=Function.prototype,Qe=$e&&Object.getOwnPropertyDescriptor,Ze=Xe(Ye,"name"),tr={EXISTS:Ze,PROPER:Ze&&"something"===function(){}.name,CONFIGURABLE:Ze&&(!$e||$e&&Qe(Ye,"name").configurable)},er=q,rr=Dt,nr=N(Function.toString);er(rr.inspectSource)||(rr.inspectSource=function(t){return nr(t)});var or,ir,ur,cr=rr.inspectSource,ar=q,fr=cr,sr=p.WeakMap,lr=ar(sr)&&/native code/.test(fr(sr)),pr=It.exports,dr=qt,vr=pr("keys"),hr=function(t){return vr[t]||(vr[t]=dr(t))},yr={},mr=lr,gr=p,br=N,Sr=$,_r=qe,wr=Bt,Or=Dt,xr=hr,Er=yr,jr=gr.TypeError,kr=gr.WeakMap;if(mr||Or.state){var Pr=Or.state||(Or.state=new kr),Tr=br(Pr.get),Ir=br(Pr.has),Cr=br(Pr.set);or=function(t,e){if(Ir(Pr,t))throw new jr("Object already initialized");return e.facade=t,Cr(Pr,t,e),e},ir=function(t){return Tr(Pr,t)||{}},ur=function(t){return Ir(Pr,t)}}else{var Nr=xr("state");Er[Nr]=!0,or=function(t,e){if(wr(t,Nr))throw new jr("Object already initialized");return e.facade=t,_r(t,Nr,e),e},ir=function(t){return wr(t,Nr)?t[Nr]:{}},ur=function(t){return wr(t,Nr)}}var Rr={set:or,get:ir,has:ur,enforce:function(t){return ur(t)?ir(t):or(t,{})},getterFor:function(t){return function(e){var r;if(!Sr(e)||(r=ir(e)).type!==t)throw jr("Incompatible receiver, "+t+" required");return r}}},Ar=v,Dr=q,Mr=Bt,Lr=h,Fr=tr.CONFIGURABLE,Ur=cr,Vr=Rr.enforce,zr=Rr.get,Br=Object.defineProperty,Kr=Lr&&!Ar((function(){return 8!==Br((function(){}),"length",{value:8}).length})),Gr=String(String).split("String"),Wr=He.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!Mr(t,"name")||Fr&&t.name!==e)&&Br(t,"name",{value:e,configurable:!0}),Kr&&r&&Mr(r,"arity")&&t.length!==r.arity&&Br(t,"length",{value:r.arity});try{r&&Mr(r,"constructor")&&r.constructor?Lr&&Br(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=Vr(t);return Mr(n,"source")||(n.source=Gr.join("string"==typeof e?e:"")),t};Function.prototype.toString=Wr((function(){return Dr(this)&&zr(this).source||Ur(this)}),"toString");var Jr=q,qr=qe,Hr=He.exports,$r=Rt,Xr=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;return Jr(r)&&Hr(r,i,n),n.global?o?t[e]=r:$r(e,r):(n.unsafe?t[e]&&(o=!0):delete t[e],o?t[e]=r:qr(t,e,r)),t},Yr={},Qr=Math.ceil,Zr=Math.floor,tn=Math.trunc||function(t){var e=+t;return(e>0?Zr:Qr)(e)},en=function(t){var e=+t;return e!=e||0===e?0:tn(e)},rn=en,nn=Math.max,on=Math.min,un=function(t,e){var r=rn(t);return r<0?nn(r+e,0):on(r,e)},cn=en,an=Math.min,fn=function(t){return t>0?an(cn(t),9007199254740991):0},sn=fn,ln=function(t){return sn(t.length)},pn=J,dn=un,vn=ln,hn=function(t){return function(e,r,n){var o,i=pn(e),u=vn(i),c=dn(n,u);if(t&&r!=r){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}},yn={includes:hn(!0),indexOf:hn(!1)},mn=Bt,gn=J,bn=yn.indexOf,Sn=yr,_n=N([].push),wn=function(t,e){var r,n=gn(t),o=0,i=[];for(r in n)!mn(Sn,r)&&mn(n,r)&&_n(i,r);for(;e.length>o;)mn(n,r=e[o++])&&(~bn(i,r)||_n(i,r));return i},On=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xn=wn,En=On.concat("length","prototype");Yr.f=Object.getOwnPropertyNames||function(t){return xn(t,En)};var jn={};jn.f=Object.getOwnPropertySymbols;var kn=Z,Pn=Yr,Tn=jn,In=Me,Cn=N([].concat),Nn=kn("Reflect","ownKeys")||function(t){var e=Pn.f(In(t)),r=Tn.f;return r?Cn(e,r(t)):e},Rn=Bt,An=Nn,Dn=d,Mn=Ce,Ln=v,Fn=q,Un=/#|\.prototype\./,Vn=function(t,e){var r=Bn[zn(t)];return r==Gn||r!=Kn&&(Fn(e)?Ln(e):!!e)},zn=Vn.normalize=function(t){return String(t).replace(Un,".").toLowerCase()},Bn=Vn.data={},Kn=Vn.NATIVE="N",Gn=Vn.POLYFILL="P",Wn=Vn,Jn=p,qn=d.f,Hn=qe,$n=Xr,Xn=Rt,Yn=function(t,e,r){for(var n=An(e),o=Mn.f,i=Dn.f,u=0;u<n.length;u++){var c=n[u];Rn(t,c)||r&&Rn(r,c)||o(t,c,i(e,c))}},Qn=Wn,Zn=function(t,e){var r,n,o,i,u,c=t.target,a=t.global,f=t.stat;if(r=a?Jn:f?Jn[c]||Xn(c,{}):(Jn[c]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(u=qn(r,n))&&u.value:r[n],!Qn(a?n:c+(f?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Yn(i,o)}(t.sham||o&&o.sham)&&Hn(i,"sham",!0),$n(r,n,i,t)}},to=wn,eo=On,ro=Object.keys||function(t){return to(t,eo)},no=Ut,oo=ro;Zn({target:"Object",stat:!0,forced:v((function(){oo(1)}))},{keys:function(t){return oo(no(t))}});var io={};io[oe("toStringTag")]="z";var uo="[object z]"===String(io),co=uo,ao=q,fo=M,so=oe("toStringTag"),lo=Object,po="Arguments"==fo(function(){return arguments}()),vo=co?fo:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=lo(t),so))?r:po?fo(e):"Object"==(n=fo(e))&&ao(e.callee)?"Arguments":n},ho=vo,yo=String,mo=function(t){if("Symbol"===ho(t))throw TypeError("Cannot convert a Symbol value to a string");return yo(t)},go={},bo=h,So=Ne,_o=Ce,wo=Me,Oo=J,xo=ro;go.f=bo&&!So?Object.defineProperties:function(t,e){wo(t);for(var r,n=Oo(e),o=xo(e),i=o.length,u=0;i>u;)_o.f(t,r=o[u++],n[r]);return t};var Eo,jo=Z("document","documentElement"),ko=Me,Po=go,To=On,Io=yr,Co=jo,No=be,Ro=hr("IE_PROTO"),Ao=function(){},Do=function(t){return"<script>"+t+"<\/script>"},Mo=function(t){t.write(Do("")),t.close();var e=t.parentWindow.Object;return t=null,e},Lo=function(){try{Eo=new ActiveXObject("htmlfile")}catch(t){}var t,e;Lo="undefined"!=typeof document?document.domain&&Eo?Mo(Eo):((e=No("iframe")).style.display="none",Co.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Do("document.F=Object")),t.close(),t.F):Mo(Eo);for(var r=To.length;r--;)delete Lo.prototype[To[r]];return Lo()};Io[Ro]=!0;var Fo=Object.create||function(t,e){var r;return null!==t?(Ao.prototype=ko(t),r=new Ao,Ao.prototype=null,r[Ro]=t):r=Lo(),void 0===e?r:Po.f(r,e)},Uo={},Vo=he,zo=Ce,Bo=j,Ko=function(t,e,r){var n=Vo(e);n in t?zo.f(t,n,Bo(0,r)):t[n]=r},Go=un,Wo=ln,Jo=Ko,qo=Array,Ho=Math.max,$o=function(t,e,r){for(var n=Wo(t),o=Go(e,n),i=Go(void 0===r?n:r,n),u=qo(Ho(i-o,0)),c=0;o<i;o++,c++)Jo(u,c,t[o]);return u.length=c,u},Xo=M,Yo=J,Qo=Yr.f,Zo=$o,ti="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Uo.f=function(t){return ti&&"Window"==Xo(t)?function(t){try{return Qo(t)}catch(t){return Zo(ti)}}(t):Qo(Yo(t))};var ei={},ri=oe;ei.f=ri;var ni=p,oi=Bt,ii=ei,ui=Ce.f,ci=b,ai=Z,fi=oe,si=Xr,li=Ce.f,pi=Bt,di=oe("toStringTag"),vi=function(t,e,r){t&&!r&&(t=t.prototype),t&&!pi(t,di)&&li(t,di,{configurable:!0,value:e})},hi=Ot,yi=y,mi=N(N.bind),gi=function(t,e){return hi(t),void 0===e?t:yi?mi(t,e):function(){return t.apply(e,arguments)}},bi=M,Si=Array.isArray||function(t){return"Array"==bi(t)},_i=N,wi=v,Oi=q,xi=vo,Ei=cr,ji=function(){},ki=[],Pi=Z("Reflect","construct"),Ti=/^\s*(?:class|function)\b/,Ii=_i(Ti.exec),Ci=!Ti.exec(ji),Ni=function(t){if(!Oi(t))return!1;try{return Pi(ji,ki,t),!0}catch(t){return!1}},Ri=function(t){if(!Oi(t))return!1;switch(xi(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ci||!!Ii(Ti,Ei(t))}catch(t){return!0}};Ri.sham=!0;var Ai=!Pi||wi((function(){var t;return Ni(Ni.call)||!Ni(Object)||!Ni((function(){t=!0}))||t}))?Ri:Ni,Di=Si,Mi=Ai,Li=$,Fi=oe("species"),Ui=Array,Vi=function(t){var e;return Di(t)&&(e=t.constructor,(Mi(e)&&(e===Ui||Di(e.prototype))||Li(e)&&null===(e=e[Fi]))&&(e=void 0)),void 0===e?Ui:e},zi=function(t,e){return new(Vi(t))(0===e?0:e)},Bi=gi,Ki=z,Gi=Ut,Wi=ln,Ji=zi,qi=N([].push),Hi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,u=7==t,c=5==t||i;return function(a,f,s,l){for(var p,d,v=Gi(a),h=Ki(v),y=Bi(f,s),m=Wi(h),g=0,b=l||Ji,S=e?b(a,m):r||u?b(a,0):void 0;m>g;g++)if((c||g in h)&&(d=y(p=h[g],g,v),t))if(e)S[g]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:qi(S,p)}else switch(t){case 4:return!1;case 7:qi(S,p)}return i?-1:n||o?o:S}},$i={forEach:Hi(0),map:Hi(1),filter:Hi(2),some:Hi(3),every:Hi(4),find:Hi(5),findIndex:Hi(6),filterReject:Hi(7)},Xi=Zn,Yi=p,Qi=b,Zi=N,tu=h,eu=lt,ru=v,nu=Bt,ou=tt,iu=Me,uu=J,cu=he,au=mo,fu=j,su=Fo,lu=ro,pu=Yr,du=Uo,vu=jn,hu=d,yu=Ce,mu=go,gu=S,bu=Xr,Su=It.exports,_u=yr,wu=qt,Ou=oe,xu=ei,Eu=function(t){var e=ni.Symbol||(ni.Symbol={});oi(e,t)||ui(e,t,{value:ii.f(t)})},ju=function(){var t=ai("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=fi("toPrimitive");e&&!e[n]&&si(e,n,(function(t){return ci(r,this)}),{arity:1})},ku=vi,Pu=Rr,Tu=$i.forEach,Iu=hr("hidden"),Cu=Pu.set,Nu=Pu.getterFor("Symbol"),Ru=Object.prototype,Au=Yi.Symbol,Du=Au&&Au.prototype,Mu=Yi.TypeError,Lu=Yi.QObject,Fu=hu.f,Uu=yu.f,Vu=du.f,zu=gu.f,Bu=Zi([].push),Ku=Su("symbols"),Gu=Su("op-symbols"),Wu=Su("wks"),Ju=!Lu||!Lu.prototype||!Lu.prototype.findChild,qu=tu&&ru((function(){return 7!=su(Uu({},"a",{get:function(){return Uu(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=Fu(Ru,e);n&&delete Ru[e],Uu(t,e,r),n&&t!==Ru&&Uu(Ru,e,n)}:Uu,Hu=function(t,e){var r=Ku[t]=su(Du);return Cu(r,{type:"Symbol",tag:t,description:e}),tu||(r.description=e),r},$u=function(t,e,r){t===Ru&&$u(Gu,e,r),iu(t);var n=cu(e);return iu(r),nu(Ku,n)?(r.enumerable?(nu(t,Iu)&&t[Iu][n]&&(t[Iu][n]=!1),r=su(r,{enumerable:fu(0,!1)})):(nu(t,Iu)||Uu(t,Iu,fu(1,{})),t[Iu][n]=!0),qu(t,n,r)):Uu(t,n,r)},Xu=function(t,e){iu(t);var r=uu(e),n=lu(r).concat(tc(r));return Tu(n,(function(e){tu&&!Qi(Yu,r,e)||$u(t,e,r[e])})),t},Yu=function(t){var e=cu(t),r=Qi(zu,this,e);return!(this===Ru&&nu(Ku,e)&&!nu(Gu,e))&&(!(r||!nu(this,e)||!nu(Ku,e)||nu(this,Iu)&&this[Iu][e])||r)},Qu=function(t,e){var r=uu(t),n=cu(e);if(r!==Ru||!nu(Ku,n)||nu(Gu,n)){var o=Fu(r,n);return!o||!nu(Ku,n)||nu(r,Iu)&&r[Iu][n]||(o.enumerable=!0),o}},Zu=function(t){var e=Vu(uu(t)),r=[];return Tu(e,(function(t){nu(Ku,t)||nu(_u,t)||Bu(r,t)})),r},tc=function(t){var e=t===Ru,r=Vu(e?Gu:uu(t)),n=[];return Tu(r,(function(t){!nu(Ku,t)||e&&!nu(Ru,t)||Bu(n,Ku[t])})),n};eu||(bu(Du=(Au=function(){if(ou(Du,this))throw Mu("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?au(arguments[0]):void 0,e=wu(t),r=function(t){this===Ru&&Qi(r,Gu,t),nu(this,Iu)&&nu(this[Iu],e)&&(this[Iu][e]=!1),qu(this,e,fu(1,t))};return tu&&Ju&&qu(Ru,e,{configurable:!0,set:r}),Hu(e,t)}).prototype,"toString",(function(){return Nu(this).tag})),bu(Au,"withoutSetter",(function(t){return Hu(wu(t),t)})),gu.f=Yu,yu.f=$u,mu.f=Xu,hu.f=Qu,pu.f=du.f=Zu,vu.f=tc,xu.f=function(t){return Hu(Ou(t),t)},tu&&(Uu(Du,"description",{configurable:!0,get:function(){return Nu(this).description}}),bu(Ru,"propertyIsEnumerable",Yu,{unsafe:!0}))),Xi({global:!0,constructor:!0,wrap:!0,forced:!eu,sham:!eu},{Symbol:Au}),Tu(lu(Wu),(function(t){Eu(t)})),Xi({target:"Symbol",stat:!0,forced:!eu},{useSetter:function(){Ju=!0},useSimple:function(){Ju=!1}}),Xi({target:"Object",stat:!0,forced:!eu,sham:!tu},{create:function(t,e){return void 0===e?su(t):Xu(su(t),e)},defineProperty:$u,defineProperties:Xu,getOwnPropertyDescriptor:Qu}),Xi({target:"Object",stat:!0,forced:!eu},{getOwnPropertyNames:Zu}),ju(),ku(Au,"Symbol"),_u[Iu]=!0;var ec=lt&&!!Symbol.for&&!!Symbol.keyFor,rc=Zn,nc=Z,oc=Bt,ic=mo,uc=It.exports,cc=ec,ac=uc("string-to-symbol-registry"),fc=uc("symbol-to-string-registry");rc({target:"Symbol",stat:!0,forced:!cc},{for:function(t){var e=ic(t);if(oc(ac,e))return ac[e];var r=nc("Symbol")(e);return ac[e]=r,fc[r]=e,r}});var sc=Zn,lc=Bt,pc=mt,dc=bt,vc=ec,hc=(0,It.exports)("symbol-to-string-registry");sc({target:"Symbol",stat:!0,forced:!vc},{keyFor:function(t){if(!pc(t))throw TypeError(dc(t)+" is not a symbol");if(lc(hc,t))return hc[t]}});var yc=y,mc=Function.prototype,gc=mc.apply,bc=mc.call,Sc="object"==typeof Reflect&&Reflect.apply||(yc?bc.bind(gc):function(){return bc.apply(gc,arguments)}),_c=N([].slice),wc=Zn,Oc=Z,xc=Sc,Ec=b,jc=N,kc=v,Pc=Si,Tc=q,Ic=$,Cc=mt,Nc=_c,Rc=lt,Ac=Oc("JSON","stringify"),Dc=jc(/./.exec),Mc=jc("".charAt),Lc=jc("".charCodeAt),Fc=jc("".replace),Uc=jc(1..toString),Vc=/[\uD800-\uDFFF]/g,zc=/^[\uD800-\uDBFF]$/,Bc=/^[\uDC00-\uDFFF]$/,Kc=!Rc||kc((function(){var t=Oc("Symbol")();return"[null]"!=Ac([t])||"{}"!=Ac({a:t})||"{}"!=Ac(Object(t))})),Gc=kc((function(){return'"\\udf06\\ud834"'!==Ac("\udf06\ud834")||'"\\udead"'!==Ac("\udead")})),Wc=function(t,e){var r=Nc(arguments),n=e;if((Ic(e)||void 0!==t)&&!Cc(t))return Pc(e)||(e=function(t,e){if(Tc(n)&&(e=Ec(n,this,t,e)),!Cc(e))return e}),r[1]=e,xc(Ac,null,r)},Jc=function(t,e,r){var n=Mc(r,e-1),o=Mc(r,e+1);return Dc(zc,t)&&!Dc(Bc,o)||Dc(Bc,t)&&!Dc(zc,n)?"\\u"+Uc(Lc(t,0),16):t};Ac&&wc({target:"JSON",stat:!0,arity:3,forced:Kc||Gc},{stringify:function(t,e,r){var n=Nc(arguments),o=xc(Kc?Wc:Ac,null,n);return Gc&&"string"==typeof o?Fc(o,Vc,Jc):o}});var qc=jn,Hc=Ut;Zn({target:"Object",stat:!0,forced:!lt||v((function(){qc.f(1)}))},{getOwnPropertySymbols:function(t){var e=qc.f;return e?e(Hc(t)):[]}});var $c=v,Xc=at,Yc=oe("species"),Qc=function(t){return Xc>=51||!$c((function(){var e=[];return(e.constructor={})[Yc]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Zc=$i.filter;Zn({target:"Array",proto:!0,forced:!Qc("filter")},{filter:function(t){return Zc(this,t,arguments.length>1?arguments[1]:void 0)}});var ta=Zn,ea=v,ra=J,na=d.f,oa=h,ia=ea((function(){na(1)}));ta({target:"Object",stat:!0,forced:!oa||ia,sham:!oa},{getOwnPropertyDescriptor:function(t,e){return na(ra(t),e)}});var ua=be("span").classList,ca=ua&&ua.constructor&&ua.constructor.prototype,aa=ca===Object.prototype?void 0:ca,fa=v,sa=function(t,e){var r=[][t];return!!r&&fa((function(){r.call(null,e||function(){return 1},1)}))},la=$i.forEach,pa=sa("forEach")?[].forEach:function(t){return la(this,t,arguments.length>1?arguments[1]:void 0)},da=p,va={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ha=aa,ya=pa,ma=qe,ga=function(t){if(t&&t.forEach!==ya)try{ma(t,"forEach",ya)}catch(e){t.forEach=ya}};for(var ba in va)va[ba]&&ga(da[ba]&&da[ba].prototype);ga(ha);var Sa=Nn,_a=J,wa=d,Oa=Ko;Zn({target:"Object",stat:!0,sham:!h},{getOwnPropertyDescriptors:function(t){for(var e,r,n=_a(t),o=wa.f,i=Sa(n),u={},c=0;i.length>c;)void 0!==(r=o(n,e=i[c++]))&&Oa(u,e,r);return u}});var xa=Zn,Ea=h,ja=go.f;xa({target:"Object",stat:!0,forced:Object.defineProperties!==ja,sham:!Ea},{defineProperties:ja});var ka=Zn,Pa=h,Ta=Ce.f;ka({target:"Object",stat:!0,forced:Object.defineProperty!==Ta,sham:!Pa},{defineProperty:Ta});var Ia,Ca={exports:{}};(Ia=Ca).exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ia.exports.__esModule=!0,Ia.exports.default=Ia.exports;var Na=s(Ca.exports),Ra={exports:{}};!function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(Ra);var Aa=s(Ra.exports),Da={exports:{}};!function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}(Da);var Ma,La=s(Da.exports),Fa=$,Ua=M,Va=oe("match"),za=function(t){var e;return Fa(t)&&(void 0!==(e=t[Va])?!!e:"RegExp"==Ua(t))},Ba=za,Ka=TypeError,Ga=function(t){if(Ba(t))throw Ka("The method doesn't accept regular expressions");return t},Wa=oe("match"),Ja=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[Wa]=!1,"/./"[t](e)}catch(t){}}return!1},qa=Zn,Ha=N,$a=d.f,Xa=fn,Ya=mo,Qa=Ga,Za=K,tf=Ja,ef=Ha("".startsWith),rf=Ha("".slice),nf=Math.min,of=tf("startsWith");qa({target:"String",proto:!0,forced:!!(of||(Ma=$a(String.prototype,"startsWith"),!Ma||Ma.writable))&&!of},{startsWith:function(t){var e=Ya(Za(this));Qa(t);var r=Xa(nf(arguments.length>1?arguments[1]:void 0,e.length)),n=Ya(t);return ef?ef(e,n,r):rf(e,r,r+n.length)===n}});var uf=Zn,cf=Si,af=Ai,ff=$,sf=un,lf=ln,pf=J,df=Ko,vf=oe,hf=_c,yf=Qc("slice"),mf=vf("species"),gf=Array,bf=Math.max;uf({target:"Array",proto:!0,forced:!yf},{slice:function(t,e){var r,n,o,i=pf(this),u=lf(i),c=sf(t,u),a=sf(void 0===e?u:e,u);if(cf(i)&&(r=i.constructor,(af(r)&&(r===gf||cf(r.prototype))||ff(r)&&null===(r=r[mf]))&&(r=void 0),r===gf||void 0===r))return hf(i,c,a);for(n=new(void 0===r?gf:r)(bf(a-c,0)),o=0;c<a;c++,o++)c in i&&df(n,o,i[c]);return n.length=o,n}});var Sf=TypeError,_f=Zn,wf=v,Of=Si,xf=$,Ef=Ut,jf=ln,kf=function(t){if(t>9007199254740991)throw Sf("Maximum allowed index exceeded");return t},Pf=Ko,Tf=zi,If=Qc,Cf=at,Nf=oe("isConcatSpreadable"),Rf=Cf>=51||!wf((function(){var t=[];return t[Nf]=!1,t.concat()[0]!==t})),Af=If("concat"),Df=function(t){if(!xf(t))return!1;var e=t[Nf];return void 0!==e?!!e:Of(t)};_f({target:"Array",proto:!0,arity:1,forced:!Rf||!Af},{concat:function(t){var e,r,n,o,i,u=Ef(this),c=Tf(u,0),a=0;for(e=-1,n=arguments.length;e<n;e++)if(Df(i=-1===e?u:arguments[e]))for(o=jf(i),kf(a+o),r=0;r<o;r++,a++)r in i&&Pf(c,a,i[r]);else kf(a+1),Pf(c,a++,i);return c.length=a,c}});var Mf=oe,Lf=Fo,Ff=Ce.f,Uf=Mf("unscopables"),Vf=Array.prototype;null==Vf[Uf]&&Ff(Vf,Uf,{configurable:!0,value:Lf(null)});var zf=function(t){Vf[Uf][t]=!0},Bf=yn.includes,Kf=zf;Zn({target:"Array",proto:!0,forced:v((function(){return!Array(1).includes()}))},{includes:function(t){return Bf(this,t,arguments.length>1?arguments[1]:void 0)}}),Kf("includes");var Gf=Zn,Wf=Ga,Jf=K,qf=mo,Hf=Ja,$f=N("".indexOf);Gf({target:"String",proto:!0,forced:!Hf("includes")},{includes:function(t){return!!~$f(qf(Jf(this)),qf(Wf(t)),arguments.length>1?arguments[1]:void 0)}});var Xf,Yf,Qf=Me,Zf=v,ts=p.RegExp,es=Zf((function(){var t=ts("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),rs=es||Zf((function(){return!ts("a","y").sticky})),ns={BROKEN_CARET:es||Zf((function(){var t=ts("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:rs,UNSUPPORTED_Y:es},os=v,is=p.RegExp,us=os((function(){var t=is(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),cs=v,as=p.RegExp,fs=cs((function(){var t=as("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),ss=b,ls=N,ps=mo,ds=function(){var t=Qf(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},vs=ns,hs=It.exports,ys=Fo,ms=Rr.get,gs=us,bs=fs,Ss=hs("native-string-replace",String.prototype.replace),_s=RegExp.prototype.exec,ws=_s,Os=ls("".charAt),xs=ls("".indexOf),Es=ls("".replace),js=ls("".slice),ks=(Yf=/b*/g,ss(_s,Xf=/a/,"a"),ss(_s,Yf,"a"),0!==Xf.lastIndex||0!==Yf.lastIndex),Ps=vs.BROKEN_CARET,Ts=void 0!==/()??/.exec("")[1];(ks||Ts||Ps||gs||bs)&&(ws=function(t){var e,r,n,o,i,u,c,a=this,f=ms(a),s=ps(t),l=f.raw;if(l)return l.lastIndex=a.lastIndex,e=ss(ws,l,s),a.lastIndex=l.lastIndex,e;var p=f.groups,d=Ps&&a.sticky,v=ss(ds,a),h=a.source,y=0,m=s;if(d&&(v=Es(v,"y",""),-1===xs(v,"g")&&(v+="g"),m=js(s,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==Os(s,a.lastIndex-1))&&(h="(?: "+h+")",m=" "+m,y++),r=new RegExp("^(?:"+h+")",v)),Ts&&(r=new RegExp("^"+h+"$(?!\\s)",v)),ks&&(n=a.lastIndex),o=ss(_s,d?r:a,m),d?o?(o.input=js(o.input,y),o[0]=js(o[0],y),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:ks&&o&&(a.lastIndex=a.global?o.index+o[0].length:n),Ts&&o&&o.length>1&&ss(Ss,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=u=ys(null),i=0;i<p.length;i++)u[(c=p[i])[0]]=o[c[1]];return o});var Is=ws;Zn({target:"RegExp",proto:!0,forced:/./.exec!==Is},{exec:Is});var Cs=N,Ns=Xr,Rs=Is,As=v,Ds=oe,Ms=qe,Ls=Ds("species"),Fs=RegExp.prototype,Us=Ai,Vs=bt,zs=TypeError,Bs=Me,Ks=function(t){if(Us(t))return t;throw zs(Vs(t)+" is not a constructor")},Gs=oe("species"),Ws=function(t,e){var r,n=Bs(t).constructor;return void 0===n||null==(r=Bs(n)[Gs])?e:Ks(r)},Js=N,qs=en,Hs=mo,$s=K,Xs=Js("".charAt),Ys=Js("".charCodeAt),Qs=Js("".slice),Zs=function(t){return function(e,r){var n,o,i=Hs($s(e)),u=qs(r),c=i.length;return u<0||u>=c?t?"":void 0:(n=Ys(i,u))<55296||n>56319||u+1===c||(o=Ys(i,u+1))<56320||o>57343?t?Xs(i,u):n:t?Qs(i,u,u+2):o-56320+(n-55296<<10)+65536}},tl={codeAt:Zs(!1),charAt:Zs(!0)}.charAt,el=b,rl=Me,nl=q,ol=M,il=Is,ul=TypeError,cl=Sc,al=b,fl=N,sl=function(t,e,r,n){var o=Ds(t),i=!As((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),u=i&&!As((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Ls]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!u||r){var c=Cs(/./[o]),a=e(o,""[t],(function(t,e,r,n,o){var u=Cs(t),a=e.exec;return a===Rs||a===Fs.exec?i&&!o?{done:!0,value:c(e,r,n)}:{done:!0,value:u(r,e,n)}:{done:!1}}));Ns(String.prototype,t,a[0]),Ns(Fs,o,a[1])}n&&Ms(Fs[o],"sham",!0)},ll=za,pl=Me,dl=K,vl=Ws,hl=function(t,e,r){return e+(r?tl(t,e).length:1)},yl=fn,ml=mo,gl=Et,bl=$o,Sl=function(t,e){var r=t.exec;if(nl(r)){var n=el(r,t,e);return null!==n&&rl(n),n}if("RegExp"===ol(t))return el(il,t,e);throw ul("RegExp#exec called on incompatible receiver")},_l=Is,wl=v,Ol=ns.UNSUPPORTED_Y,xl=Math.min,El=[].push,jl=fl(/./.exec),kl=fl(El),Pl=fl("".slice);sl("split",(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=ml(dl(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!ll(t))return al(e,n,t,o);for(var i,u,c,a=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=new RegExp(t.source,f+"g");(i=al(_l,l,n))&&!((u=l.lastIndex)>s&&(kl(a,Pl(n,s,i.index)),i.length>1&&i.index<n.length&&cl(El,a,bl(i,1)),c=i[0].length,s=u,a.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return s===n.length?!c&&jl(l,"")||kl(a,""):kl(a,Pl(n,s)),a.length>o?bl(a,0,o):a}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:al(e,this,t,r)}:e,[function(e,r){var o=dl(this),i=null==e?void 0:gl(e,t);return i?al(i,e,o,r):al(n,ml(o),e,r)},function(t,o){var i=pl(this),u=ml(t),c=r(n,i,u,o,n!==e);if(c.done)return c.value;var a=vl(i,RegExp),f=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Ol?"g":"y"),l=new a(Ol?"^(?:"+i.source+")":i,s),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===u.length)return null===Sl(l,u)?[u]:[];for(var d=0,v=0,h=[];v<u.length;){l.lastIndex=Ol?0:v;var y,m=Sl(l,Ol?Pl(u,v):u);if(null===m||(y=xl(yl(l.lastIndex+(Ol?v:0)),u.length))===d)v=hl(u,v,f);else{if(kl(h,Pl(u,d,v)),h.length===p)return h;for(var g=1;g<=m.length-1;g++)if(kl(h,m[g]),h.length===p)return h;v=d=y}}return kl(h,Pl(u,d)),h}]}),!!wl((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),Ol);var Tl=vo,Il=uo?{}.toString:function(){return"[object "+Tl(this)+"]"};uo||Xr(Object.prototype,"toString",Il,{unsafe:!0});var Cl,Nl,Rl,Al,Dl="process"==M(p.process),Ml=q,Ll=String,Fl=TypeError,Ul=N,Vl=Me,zl=function(t){if("object"==typeof t||Ml(t))return t;throw Fl("Can't set "+Ll(t)+" as a prototype")},Bl=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Ul(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return Vl(r),zl(n),e?t(r,n):r.__proto__=n,r}}():void 0),Kl=Z,Gl=Ce,Wl=h,Jl=oe("species"),ql=tt,Hl=TypeError,$l=TypeError,Xl=function(t,e){if(t<e)throw $l("Not enough arguments");return t},Yl=/(?:ipad|iphone|ipod).*applewebkit/i.test(et),Ql=p,Zl=Sc,tp=gi,ep=q,rp=Bt,np=v,op=jo,ip=_c,up=be,cp=Xl,ap=Yl,fp=Dl,sp=Ql.setImmediate,lp=Ql.clearImmediate,pp=Ql.process,dp=Ql.Dispatch,vp=Ql.Function,hp=Ql.MessageChannel,yp=Ql.String,mp=0,gp={};try{Cl=Ql.location}catch(t){}var bp=function(t){if(rp(gp,t)){var e=gp[t];delete gp[t],e()}},Sp=function(t){return function(){bp(t)}},_p=function(t){bp(t.data)},wp=function(t){Ql.postMessage(yp(t),Cl.protocol+"//"+Cl.host)};sp&&lp||(sp=function(t){cp(arguments.length,1);var e=ep(t)?t:vp(t),r=ip(arguments,1);return gp[++mp]=function(){Zl(e,void 0,r)},Nl(mp),mp},lp=function(t){delete gp[t]},fp?Nl=function(t){pp.nextTick(Sp(t))}:dp&&dp.now?Nl=function(t){dp.now(Sp(t))}:hp&&!ap?(Al=(Rl=new hp).port2,Rl.port1.onmessage=_p,Nl=tp(Al.postMessage,Al)):Ql.addEventListener&&ep(Ql.postMessage)&&!Ql.importScripts&&Cl&&"file:"!==Cl.protocol&&!np(wp)?(Nl=wp,Ql.addEventListener("message",_p,!1)):Nl="onreadystatechange"in up("script")?function(t){op.appendChild(up("script")).onreadystatechange=function(){op.removeChild(this),bp(t)}}:function(t){setTimeout(Sp(t),0)});var Op,xp,Ep,jp,kp,Pp,Tp,Ip,Cp={set:sp,clear:lp},Np=p,Rp=/ipad|iphone|ipod/i.test(et)&&void 0!==Np.Pebble,Ap=/web0s(?!.*chrome)/i.test(et),Dp=p,Mp=gi,Lp=d.f,Fp=Cp.set,Up=Yl,Vp=Rp,zp=Ap,Bp=Dl,Kp=Dp.MutationObserver||Dp.WebKitMutationObserver,Gp=Dp.document,Wp=Dp.process,Jp=Dp.Promise,qp=Lp(Dp,"queueMicrotask"),Hp=qp&&qp.value;Hp||(Op=function(){var t,e;for(Bp&&(t=Wp.domain)&&t.exit();xp;){e=xp.fn,xp=xp.next;try{e()}catch(t){throw xp?jp():Ep=void 0,t}}Ep=void 0,t&&t.enter()},Up||Bp||zp||!Kp||!Gp?!Vp&&Jp&&Jp.resolve?((Tp=Jp.resolve(void 0)).constructor=Jp,Ip=Mp(Tp.then,Tp),jp=function(){Ip(Op)}):Bp?jp=function(){Wp.nextTick(Op)}:(Fp=Mp(Fp,Dp),jp=function(){Fp(Op)}):(kp=!0,Pp=Gp.createTextNode(""),new Kp(Op).observe(Pp,{characterData:!0}),jp=function(){Pp.data=kp=!kp}));var $p=Hp||function(t){var e={fn:t,next:void 0};Ep&&(Ep.next=e),xp||(xp=e,jp()),Ep=e},Xp=p,Yp=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Qp=function(){this.head=null,this.tail=null};Qp.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Zp=Qp,td=p.Promise,ed="object"==typeof window&&"object"!=typeof Deno,rd=p,nd=td,od=q,id=Wn,ud=cr,cd=oe,ad=ed,fd=at;nd&&nd.prototype;var sd=cd("species"),ld=!1,pd=od(rd.PromiseRejectionEvent),dd=id("Promise",(function(){var t=ud(nd),e=t!==String(nd);if(!e&&66===fd)return!0;if(fd>=51&&/native code/.test(t))return!1;var r=new nd((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(r.constructor={})[sd]=n,!(ld=r.then((function(){}))instanceof n)||!e&&ad&&!pd})),vd={CONSTRUCTOR:dd,REJECTION_EVENT:pd,SUBCLASSING:ld},hd={},yd=Ot,md=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=yd(e),this.reject=yd(r)};hd.f=function(t){return new md(t)};var gd,bd,Sd,_d=Zn,wd=Dl,Od=p,xd=b,Ed=Xr,jd=Bl,kd=vi,Pd=function(t){var e=Kl(t),r=Gl.f;Wl&&e&&!e[Jl]&&r(e,Jl,{configurable:!0,get:function(){return this}})},Td=Ot,Id=q,Cd=$,Nd=function(t,e){if(ql(e,t))return t;throw Hl("Incorrect invocation")},Rd=Ws,Ad=Cp.set,Dd=$p,Md=function(t,e){var r=Xp.console;r&&r.error},Ld=Yp,Fd=Zp,Ud=Rr,Vd=td,zd=hd,Bd=vd.CONSTRUCTOR,Kd=vd.REJECTION_EVENT,Gd=vd.SUBCLASSING,Wd=Ud.getterFor("Promise"),Jd=Ud.set,qd=Vd&&Vd.prototype,Hd=Vd,$d=qd,Xd=Od.TypeError,Yd=Od.document,Qd=Od.process,Zd=zd.f,tv=Zd,ev=!!(Yd&&Yd.createEvent&&Od.dispatchEvent),rv=function(t){var e;return!(!Cd(t)||!Id(e=t.then))&&e},nv=function(t,e){var r,n,o,i=e.value,u=1==e.state,c=u?t.ok:t.fail,a=t.resolve,f=t.reject,s=t.domain;try{c?(u||(2===e.rejection&&av(e),e.rejection=1),!0===c?r=i:(s&&s.enter(),r=c(i),s&&(s.exit(),o=!0)),r===t.promise?f(Xd("Promise-chain cycle")):(n=rv(r))?xd(n,r,a,f):a(r)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},ov=function(t,e){t.notified||(t.notified=!0,Dd((function(){for(var r,n=t.reactions;r=n.get();)nv(r,t);t.notified=!1,e&&!t.rejection&&uv(t)})))},iv=function(t,e,r){var n,o;ev?((n=Yd.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),Od.dispatchEvent(n)):n={promise:e,reason:r},!Kd&&(o=Od["on"+t])?o(n):"unhandledrejection"===t&&Md("Unhandled promise rejection",r)},uv=function(t){xd(Ad,Od,(function(){var e,r=t.facade,n=t.value;if(cv(t)&&(e=Ld((function(){wd?Qd.emit("unhandledRejection",n,r):iv("unhandledrejection",r,n)})),t.rejection=wd||cv(t)?2:1,e.error))throw e.value}))},cv=function(t){return 1!==t.rejection&&!t.parent},av=function(t){xd(Ad,Od,(function(){var e=t.facade;wd?Qd.emit("rejectionHandled",e):iv("rejectionhandled",e,t.value)}))},fv=function(t,e,r){return function(n){t(e,n,r)}},sv=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,ov(t,!0))},lv=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Xd("Promise can't be resolved itself");var n=rv(e);n?Dd((function(){var r={done:!1};try{xd(n,e,fv(lv,r,t),fv(sv,r,t))}catch(e){sv(r,e,t)}})):(t.value=e,t.state=1,ov(t,!1))}catch(e){sv({done:!1},e,t)}}};if(Bd&&($d=(Hd=function(t){Nd(this,$d),Td(t),xd(gd,this);var e=Wd(this);try{t(fv(lv,e),fv(sv,e))}catch(t){sv(e,t)}}).prototype,(gd=function(t){Jd(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Fd,rejection:!1,state:0,value:void 0})}).prototype=Ed($d,"then",(function(t,e){var r=Wd(this),n=Zd(Rd(this,Hd));return r.parent=!0,n.ok=!Id(t)||t,n.fail=Id(e)&&e,n.domain=wd?Qd.domain:void 0,0==r.state?r.reactions.add(n):Dd((function(){nv(n,r)})),n.promise})),bd=function(){var t=new gd,e=Wd(t);this.promise=t,this.resolve=fv(lv,e),this.reject=fv(sv,e)},zd.f=Zd=function(t){return t===Hd||undefined===t?new bd(t):tv(t)},Id(Vd)&&qd!==Object.prototype)){Sd=qd.then,Gd||Ed(qd,"then",(function(t,e){var r=this;return new Hd((function(t,e){xd(Sd,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete qd.constructor}catch(t){}jd&&jd(qd,$d)}_d({global:!0,constructor:!0,wrap:!0,forced:Bd},{Promise:Hd}),kd(Hd,"Promise",!1),Pd("Promise");var pv={},dv=pv,vv=oe("iterator"),hv=Array.prototype,yv=vo,mv=Et,gv=pv,bv=oe("iterator"),Sv=function(t){if(null!=t)return mv(t,bv)||mv(t,"@@iterator")||gv[yv(t)]},_v=b,wv=Ot,Ov=Me,xv=bt,Ev=Sv,jv=TypeError,kv=b,Pv=Me,Tv=Et,Iv=gi,Cv=b,Nv=Me,Rv=bt,Av=function(t){return void 0!==t&&(dv.Array===t||hv[vv]===t)},Dv=ln,Mv=tt,Lv=function(t,e){var r=arguments.length<2?Ev(t):e;if(wv(r))return Ov(_v(r,t));throw jv(xv(t)+" is not iterable")},Fv=Sv,Uv=function(t,e,r){var n,o;Pv(t);try{if(!(n=Tv(t,"return"))){if("throw"===e)throw r;return r}n=kv(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return Pv(n),r},Vv=TypeError,zv=function(t,e){this.stopped=t,this.result=e},Bv=zv.prototype,Kv=function(t,e,r){var n,o,i,u,c,a,f,s=r&&r.that,l=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),d=!(!r||!r.INTERRUPTED),v=Iv(e,s),h=function(t){return n&&Uv(n,"normal",t),new zv(!0,t)},y=function(t){return l?(Nv(t),d?v(t[0],t[1],h):v(t[0],t[1])):d?v(t,h):v(t)};if(p)n=t;else{if(!(o=Fv(t)))throw Vv(Rv(t)+" is not iterable");if(Av(o)){for(i=0,u=Dv(t);u>i;i++)if((c=y(t[i]))&&Mv(Bv,c))return c;return new zv(!1)}n=Lv(t,o)}for(a=n.next;!(f=Cv(a,n)).done;){try{c=y(f.value)}catch(t){Uv(n,"throw",t)}if("object"==typeof c&&c&&Mv(Bv,c))return c}return new zv(!1)},Gv=oe("iterator"),Wv=!1;try{var Jv=0,qv={next:function(){return{done:!!Jv++}},return:function(){Wv=!0}};qv[Gv]=function(){return this},Array.from(qv,(function(){throw 2}))}catch(t){}var Hv=td,$v=function(t,e){if(!e&&!Wv)return!1;var r=!1;try{var n={};n[Gv]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Xv=vd.CONSTRUCTOR||!$v((function(t){Hv.all(t).then(void 0,(function(){}))})),Yv=b,Qv=Ot,Zv=hd,th=Yp,eh=Kv;Zn({target:"Promise",stat:!0,forced:Xv},{all:function(t){var e=this,r=Zv.f(e),n=r.resolve,o=r.reject,i=th((function(){var r=Qv(e.resolve),i=[],u=0,c=1;eh(t,(function(t){var a=u++,f=!1;c++,Yv(r,e,t).then((function(t){f||(f=!0,i[a]=t,--c||n(i))}),o)})),--c||n(i)}));return i.error&&o(i.value),r.promise}});var rh=Zn,nh=vd.CONSTRUCTOR,oh=td,ih=Z,uh=q,ch=Xr,ah=oh&&oh.prototype;if(rh({target:"Promise",proto:!0,forced:nh,real:!0},{catch:function(t){return this.then(void 0,t)}}),uh(oh)){var fh=ih("Promise").prototype.catch;ah.catch!==fh&&ch(ah,"catch",fh,{unsafe:!0})}var sh=b,lh=Ot,ph=hd,dh=Yp,vh=Kv;Zn({target:"Promise",stat:!0,forced:Xv},{race:function(t){var e=this,r=ph.f(e),n=r.reject,o=dh((function(){var o=lh(e.resolve);vh(t,(function(t){sh(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var hh=b,yh=hd;Zn({target:"Promise",stat:!0,forced:vd.CONSTRUCTOR},{reject:function(t){var e=yh.f(this);return hh(e.reject,void 0,t),e.promise}});var mh=Me,gh=$,bh=hd,Sh=Zn,_h=vd.CONSTRUCTOR,wh=function(t,e){if(mh(t),gh(e)&&e.constructor===t)return e;var r=bh.f(t);return(0,r.resolve)(e),r.promise};Z("Promise"),Sh({target:"Promise",stat:!0,forced:_h},{resolve:function(t){return wh(this,t)}});Zn({target:"Array",proto:!0,forced:[].forEach!=pa},{forEach:pa});var Oh=Zn,xh=Date,Eh=N(xh.prototype.getTime);Oh({target:"Date",stat:!0},{now:function(){return Eh(new xh)}});var jh=N,kh=Xr,Ph=Date.prototype,Th=jh(Ph.toString),Ih=jh(Ph.getTime);"Invalid Date"!=String(new Date(NaN))&&kh(Ph,"toString",(function(){var t=Ih(this);return t==t?Th(this):"Invalid Date"}));var Ch=h,Nh=tr.EXISTS,Rh=N,Ah=Ce.f,Dh=Function.prototype,Mh=Rh(Dh.toString),Lh=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Fh=Rh(Lh.exec);Ch&&!Nh&&Ah(Dh,"name",{configurable:!0,get:function(){try{return Fh(Lh,Mh(this))[1]}catch(t){return""}}});var Uh=p,Vh=Sc,zh=q,Bh=_c,Kh=Xl,Gh=/MSIE .\./.test(et),Wh=Uh.Function,Jh=function(t){return Gh?function(e,r){var n=Kh(arguments.length,1)>2,o=zh(e)?e:Wh(e),i=n?Bh(arguments,2):void 0;return t(n?function(){Vh(o,this,i)}:o,r)}:t},qh={setTimeout:Jh(Uh.setTimeout),setInterval:Jh(Uh.setInterval)},Hh=qh.setInterval;Zn({global:!0,bind:!0,forced:p.setInterval!==Hh},{setInterval:Hh});var $h=qh.setTimeout;Zn({global:!0,bind:!0,forced:p.setTimeout!==$h},{setTimeout:$h});var Xh=Zn,Yh=$i.find,Qh=zf,Zh=!0;"find"in[]&&Array(1).find((function(){Zh=!1})),Xh({target:"Array",proto:!0,forced:Zh},{find:function(t){return Yh(this,t,arguments.length>1?arguments[1]:void 0)}}),Qh("find");var ty=$i.map;Zn({target:"Array",proto:!0,forced:!Qc("map")},{map:function(t){return ty(this,t,arguments.length>1?arguments[1]:void 0)}});var ey=bt,ry=TypeError,ny=$o,oy=Math.floor,iy=function(t,e){var r=t.length,n=oy(r/2);return r<8?uy(t,e):cy(t,iy(ny(t,0,n),e),iy(ny(t,n),e),e)},uy=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},cy=function(t,e,r,n){for(var o=e.length,i=r.length,u=0,c=0;u<o||c<i;)t[u+c]=u<o&&c<i?n(e[u],r[c])<=0?e[u++]:r[c++]:u<o?e[u++]:r[c++];return t},ay=iy,fy=et.match(/firefox\/(\d+)/i),sy=!!fy&&+fy[1],ly=/MSIE|Trident/.test(et),py=et.match(/AppleWebKit\/(\d+)\./),dy=!!py&&+py[1],vy=Zn,hy=N,yy=Ot,my=Ut,gy=ln,by=function(t,e){if(!delete t[e])throw ry("Cannot delete property "+ey(e)+" of "+ey(t))},Sy=mo,_y=v,wy=ay,Oy=sa,xy=sy,Ey=ly,jy=at,ky=dy,Py=[],Ty=hy(Py.sort),Iy=hy(Py.push),Cy=_y((function(){Py.sort(void 0)})),Ny=_y((function(){Py.sort(null)})),Ry=Oy("sort"),Ay=!_y((function(){if(jy)return jy<70;if(!(xy&&xy>3)){if(Ey)return!0;if(ky)return ky<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Py.push({k:e+n,v:r})}for(Py.sort((function(t,e){return e.v-t.v})),n=0;n<Py.length;n++)e=Py[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));vy({target:"Array",proto:!0,forced:Cy||!Ny||!Ry||!Ay},{sort:function(t){void 0!==t&&yy(t);var e=my(this);if(Ay)return void 0===t?Ty(e):Ty(e,t);var r,n,o=[],i=gy(e);for(n=0;n<i;n++)n in e&&Iy(o,e[n]);for(wy(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:Sy(e)>Sy(r)?1:-1}}(t)),r=o.length,n=0;n<r;)e[n]=o[n++];for(;n<i;)by(e,n++);return e}});var Dy=/http[s]{0,1}:\/\/([\w.]+\/?)\S*/,My=function(t){return 1024*t*1024},Ly=function(t){return new Promise((function(e,r){var n=document.createElement("video");n.preload="metadata",n.src=t,n.onloadedmetadata=function(){e({duration:n.duration}),n=null},n.onerror=function(){r(new Error("视频加载失败")),n=null}}))},Fy=function(t){return t?t.split("//").pop():""},Uy={expireRedundancy:1e4,partsStrategy:[{min:My(1024),partSize:My(20),concurrentNum:10},{min:My(512),partSize:My(20),concurrentNum:10},{min:My(200),partSize:My(15),concurrentNum:10},{min:My(100),partSize:My(10),concurrentNum:10}],checkIsVideo:function(t){return t.type.startsWith("video/")},videoToVod:!1,needVideoDuration:!1,needVodURL:!1,vodTimesLimit:5,vodTimeInterval:1e3},Vy=Ut,zy=pe;Zn({target:"Date",proto:!0,arity:1,forced:v((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=Vy(this),r=zy(e,"number");return"number"!=typeof r||isFinite(r)?e.toISOString():null}});var By=b;function Ky(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ky(Object(r),!0).forEach((function(e){La(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ky(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Zn({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return By(URL.prototype.toString,this)}});var Wy=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Error(t||e.CommonMsg.Message);return n.isThenError=!0,n.result=e,Object.keys(r).forEach((function(t){n[t]=r[t]})),n.toJSON=function(){return Gy({result:e,isThenError:!0},r)},n};function Jy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jy(Object(r),!0).forEach((function(e){La(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Hy=function(){function t(e,r){Na(this,t),La(this,"VERSION","1.0.0"),La(this,"_options",{}),La(this,"obsClient",null),La(this,"_bucketName",null),La(this,"_obsServer",null),La(this,"_tokenCreateTime",null),La(this,"_tokenExpire",null),this._init(e,r)}return Aa(t,[{key:"_init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.cloneDeep(qy(qy({},Uy),r));t.bucketName&&(this._bucketName=t.bucketName),n.videoToVod&&(e.isFunction(r.apiObsToVod)||console.warn("当需要将视频上传到vod时，apiObsToVod 方法必传，且必须反回一个promise")),n.needVodURL&&(e.isFunction(r.apiVodDetails)||console.warn("当需要获取视频vod播放地址时，apiVodDetails 方法必传，且必须反回一个promise")),this._options=t,this.config=n}},{key:"_fillServer",value:function(t){return function(t){return Dy.test(t)}(t)||t.startsWith("//")?t:"https://".concat(t)}},{key:"_getUploadKey",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return t&&t.startsWith("/")&&(t=t.slice(1)),"".concat(t).concat(r.nanoid()).concat(this._getFileType(e))}},{key:"_getFileType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";try{if(t.includes(".")){var r=t.split(".");e=r[r.length-1]}}catch(t){e=""}return e?".".concat(e):""}},{key:"getClient",value:function(){var t=this;return new Promise((function(e,r){var n=function(){var n=t._options,o=["timeout","is_cname","useRawXhr"],i=t._warn;if(n.ak&&n.sk&&n.server){var c=n.server,a={access_key_id:n.ak,secret_access_key:n.sk,server:c};o.forEach((function(t){t in n&&(a[t]=n[t])}));["ak","sk","server","bucketName"].forEach((function(t){n[t]||i("参数：'".concat(t,"' 为必传参数"))})),t._bucketName=n.bucketName,t._obsServer=c,t.obsClient=new u.default(a),t._tokenExpire=0,e(t.obsClient)}else n.getAuthorization?n.getAuthorization({}).then((function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=["ak","sk"];c.forEach((function(t){r[t]||i("参数：'".concat(t,"' 为必传参数"))}));var a=r.server||t._obsServer||null;a||i("参数：'server' 为必传参数");var f={access_key_id:r.ak,secret_access_key:r.sk,server:a};t._obsServer=a,o.forEach((function(t){t in n&&(f[t]=n[t])})),r.securityToken&&(f.security_token=r.securityToken),r.expireSeconds?(t._tokenExpire=1e3*r.expireSeconds,t._tokenCreateTime=Date.now()):t._tokenExpire=-1,r.bucketName&&(t._bucketName=r.bucketName),t.obsClient=new u.default(f),e(t.obsClient)})).catch((function(t){r(t)})):(r(new Error("未提供初始化参数")),console.warn("未提供初始化参数"))};t.obsClient?0===t._tokenExpire||t._tokenCreateTime&&t._tokenCreateTime+t._tokenExpire-t.config.expireRedundancy>Date.now()?e(t.obsClient):(t.obsClient=null,n()):n()}))}},{key:"upload",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,u){var f=e;if(t.file){var s=e.config,l=null,p=null,d=s.checkIsVideo(t.file),v=null;p=s.getUploadKey?s.getUploadKey(t.file,o,r.nanoid,e._getFileType(t.file.name)):e._getUploadKey(o.folderPath,t.file.name);var h,y=function(e){t.onProgress&&t.onProgress(e)},m=function(r){var o="https://".concat(l,".").concat(Fy(e._obsServer),"/").concat(r.my_self_key);r.my_slef_server=e._obsServer,r.my_slef_data={key:r.my_self_key,fullUrl:o,isFromVod:!1,obsUrl:o},r.my_slef_data,s.videoToVod&&d?s.apiObsToVod(t.file,{key:p,bucketName:l,server:e._obsServer,obsURL:o}).then((function(t,i){var u=t.code,a=t.data,f=t.msg;200===u?(a.vodId||e._warn("接口:'apiObsToVod' 必须返回 'vodId'"),s.needVodURL&&a.url&&(r.my_slef_data.fullUrl=a.url,r.my_slef_data.isFromVod=!0),r.my_slef_data.vodId=a.vodId,r.my_slef_vod_data=i,s.needVodURL&&!a.url?c.default((function(){return new Promise((function(t,r){s.apiVodDetails(a.vodId,{key:p,bucketName:l,server:e._obsServer,obsURL:o}).then((function(e){var n=e.data;n&&n.url?t(e):setTimeout((function(){r(new Error(e.msg||"vod 转码中，无法获取播放地址"))}),s.vodTimeInterval)})).catch((function(t){r(new n.AbortError(t.message))}))}))}),{retries:s.vodTimesLimit}).then((function(t){r.my_slef_data.isFromVod=!0,r.my_slef_data.fullUrl=t.data.url,r.my_slef_vod_details=t,b(r,t.data.duration)})).catch((function(t){t.message,t.my_self_key=r.my_self_key,E(t)})):b(r,a.duration)):E(new Error(f||"obs转换vod失败"))})).catch((function(t){t.my_self_key=r.my_self_key,E(t)})):g(r)},g=function(t){s.needVideoDuration&&d?Ly(t.my_slef_data.obsUrl).then((function(e){t.my_slef_data.duration=e.duration,y({percent:100}),S(t)})).catch((function(e){e.my_self_key=t.my_self_key,E(e)})):(y({percent:100}),S(t))},b=function(t,e){s.needVideoDuration?0!==e&&e?(t.my_slef_data.duration=e,y({percent:100}),S(t)):Ly(t.my_slef_data.obsUrl).then((function(e){t.my_slef_data.duration=e.duration,y({percent:100}),S(t)})).catch((function(e){e.my_self_key=t.my_self_key,E(e)})):(y({percent:100}),S(t))},S=function(e){t.onSuccess&&t.onSuccess(e),i(e)},_=function(){e.getClient().then((function(t){(l=e._bucketName)?(v=t,t.initiateMultipartUpload({Bucket:l,Key:p,ContentType:"text/plain"},(function(t,e){t?E(t):(e.CommonMsg.Status,e.CommonMsg.Status<300&&e.InterfaceResult?(e.InterfaceResult.UploadId,w(e)):E(Wy(null,e)))}))):E(new Error("缺少必传参数：'bucketName'"))})).catch((function(t){E(t)}))},w=function(e){for(var r=0,n=t.file.size,o=function(t){return s.partsStrategy.find((function(e){return t>=e.min}))}(n),i=o.partSize,u=Math.ceil(n/i),c=e.InterfaceResult.UploadId,f=[],d=0;r<u;)!function(e){f.push((function(){return v.uploadPart({Bucket:l,Key:p,PartNumber:e,UploadId:c,SourceFile:t.file,PartSize:i,Offset:(e-1)*i}).then((function(t){var e=++d/u*100|0;return e>95&&(e=95),y({percent:e}),t}))}))}(++r);a.default(f,{concurrency:o.concurrentNum}).then((function(t){O(u,c)})).catch((function(t){t.my_self_uploadId=c,t.my_self_key=p,E(t)}))},O=function(t,e){v.listParts({Bucket:l,Key:p,UploadId:e},(function(r,n){if(r)r.my_self_uploadId=e,r.my_self_key=p,E(r);else if(n.CommonMsg.Status,n.CommonMsg.Status<300&&n.InterfaceResult)if(n.InterfaceResult.Parts,n.InterfaceResult.Parts.length===t){var o=n.InterfaceResult.Parts.sort((function(t,e){return t.PartNumber-e.PartNumber})).map((function(t){return{PartNumber:t.PartNumber,ETag:JSON.parse(t.ETag)}}));x(o,e)}else E(Wy("片段不完整",n,{my_self_uploadId:e,my_self_key:p}));else E(Wy(null,n,{my_self_uploadId:e,my_self_key:p}))}))},x=function(t,e){v.completeMultipartUpload({Bucket:l,Key:p,UploadId:e,Parts:t},(function(t,e){t?E(t):(e.CommonMsg.Status<300?(e.my_self_direct=!1,e.my_self_key=p,e.my_self_bucketName=l,m(e)):E(Wy(null,e)),e.CommonMsg.Status)}))};!(h=function(){var t=s.partsStrategy;if(t&&t.length>0)return t[t.length-1].min}())||t.file.size<h?e.getClient().then((function(r){(l=e._bucketName)?(v=r,r.putObject({Bucket:l,Key:p,SourceFile:t.file,ProgressCallback:function(t,e,r){var n=t/e*100|0;n>95&&(n=95),y({percent:n})}},(function(t,e){t?E(t):e.CommonMsg.Status<300?(e.my_self_direct=!0,e.my_self_bucketName=l,e.my_self_key=p,m(e)):E(Wy(null,e))}))):E(new Error("缺少必传参数：'bucketName'"))})).catch((function(t){E(t)})):_()}else E(new Error("缺少必传参数：'file'"));function E(e){e.my_self_uploadId&&e.my_self_key&&f.getClient().then((function(t){t.abortMultipartUpload({Bucket:l,Key:e.my_self_key,UploadId:e.my_self_uploadId})})),t.onError&&t.onError(e),u(e)}}))}},{key:"_warn",value:function(t){console.warn(t)}}]),t}();Object.defineProperty(exports,"ObsClient",{enumerable:!0,get:function(){return u.default}}),exports.default=Hy;
